---
title: Microsoft Power BI 프리미엄 용량 시나리오
description: 일반적인 Power BI 프리미엄 용량 시나리오를 설명합니다.
author: mgblythe
ms.author: mblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: conceptual
ms.date: 04/09/2019
ms.custom: seodec18
LocalizationGroup: Premium
ms.openlocfilehash: 1d666a6702515a935d93549d026f207848f2bca8
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/29/2019
ms.locfileid: "65565342"
---
# <a name="premium-capacity-scenarios"></a>프리미엄 용량 시나리오

이 문서는 Power BI 프리미엄 용량이 구현된 실제 시나리오를 설명합니다. 일반적인 문제 및 과제를 설명하고 문제를 식별하고 해결하는 방법을 설명합니다.

- [데이터 세트를 최신 상태로 유지](#keeping-datasets-up-to-date)
- [느리게 응답하는 데이터 세트를 식별](#identifying-slow-responding-datasets)
- [산발적으로 느리게 응답하는 데이터 세트에 대한 원인을 식별](#identifying-causes-for-sporadically-slow-responding-datasets)
- [메모리가 충분한지 여부를 결정](#determining-whether-there-is-enough-memory)
- [CPU가 충분한지 여부를 결정](#determining-whether-there-is-enough-cpu)

차트 및 테이블 예제와 함께 이 단계는 Power BI 관리자가 액세스하게 되는 **Power BI Premium 용량 메트릭 앱**에서 가져온 것입니다.

## <a name="keeping-datasets-up-to-date"></a>데이터 세트를 최신 상태로 유지

이 시나리오에서는, 사용자가 보고서 데이터가 오래되거나 "부실"해 보인다고 불평하여 조사가 시작되었습니다.

앱에서 관리자는 **새로 고침** 시각적 개체와 상호 작용하여 내림차순으로 **최대 대기 시간** 통계를 기준으로 데이터 세트를 정렬합니다. 이 시각적 개체는 작업 영역 이름으로 그룹화된, 대기 시간이 가장 긴 데이터 세트를 표시하도록 도와줍니다.

![작업 영역에서 그룹화 되는 최대 대기 시간을 내림차순으로 정렬 된 데이터 집합 새로 고침](media/service-premium-capacity-scenarios/dataset-refreshes.png)

**시간당 평균 새로 고침 대기 시간** 시각적 개체에서, 매일 오후 4시경에 새로 고침 대기 시간이 일관되게 최고치에 이른다는 것을 알 수 있습니다.

![새로 고침 오후 4 시 주기적으로 최대 대기](media/service-premium-capacity-scenarios/peak-refresh-waits.png)

이러한 결과에 대한 가능한 설명이 여러 가지가 있습니다.

- 새로 고침 시도가 동시에 너무 많이 발생할 수 있으며, 용량 노드에 의해 정의된 제한을 초과할 수 있습니다. 이 경우 기본 메모리 할당을 사용하여 P1에서 6개의 동시 새로 고침을 수행합니다.

- 새로 고칠 데이터 세트가 너무 커서 사용 가능한 메모리에 맞지 않을 수 있습니다(전체 새로 고침에 필요한 메모리는 2배 이상 필요).
- 비효율적인 파워 쿼리 논리로 인해 데이터 세트를 새로 고침하는 동안 메모리 사용량이 갑자기 증가할 수 있습니다. 사용 중인 용량에서 이 급증은 때때로 물리적 제한에 도달하여 새로 고침이 실패하고 잠재적으로 해당 용량 상의 다른 보고서 뷰 작업에 영향을 줄 수 있습니다.
- 메모리에 유지해야 하는 자주 쿼리되는 데이터 세트는 사용 가능한 메모리 제한으로 인해 다른 데이터 세트의 새로 고침 기능에 영향을 줄 수 있습니다.

조사를 위해 Power BI 관리자는 다음을 확인할 수 있습니다.

- 사용 가능한 메모리가 새로 고침할 데이터 세트의 크기의 2배 미만인 경우 데이터 새로 고침 시점에서 사용 가능한 메모리가 적어집니다.
- 데이터 세트가 새로 고쳐지지 않고 새로 고침 전에 메모리에 없지만, 새로 고침이 많을 때 대화형 트래픽이 표시되기 시작합니다. 특정 시간에 메모리에 로드된 어떤 데이터 세트를 보려면, Power BI 관리자는 앱에서 **데이터 세트** 탭의 데이터 세트 영역을 확인할 수 있습니다. 관리자는 **시간별로 로드된 데이터 세트 개수**에서 가로 막대 중 하나를 클릭하여 지정된 시간으로 교차 필터링할 수 있습니다. 아래 그림에서와 같이 로컬 급증은 여러 데이터 세트가 메모리에 로드된 시간을 나타내며, 이는 예약된 새로 고침의 시작을 지연할 수 있습니다.
- 데이터 새로 고침이 시작되도록 예약되되면 데이터 세트 제거가 증가합니다. 제거는 새로 고침 시간 전에 너무 많은 다양한 대화형 보고서 처리로 인한 높은 메모리 압력이 있었다는 것을 의미할 수 있습니다. **시간별 데이터 세트 제거 및 메모리 소비** 시각적 개체로 제거 급증을 명확하게 알 수 있습니다.

다음 이미지는 로드된 데이터 집합에서의 로컬 급증을 보여주며, 새로 고침의 시작 지연을 대화형으로 쿼리할 것을 제안합니다. **시간별 로드된 데이터 집합 개수** 시각적 개체에서 기간을 선택하면 **데이터 집합 크기** 시각적 개체가 교차 필터링됩니다.

![로드 된 데이터 집합의 로컬 급증 제안 새로 고침의 대화형 쿼리 지연 된 시작](media/service-premium-capacity-scenarios/hourly-loaded-dataset-counts.png)

Power BI 관리자는 다음 사항에 따라 데이터 새로 고침이 시작될 수 있도록 충분한 메모리를 사용할 수 있게 하는 단계를 수행하여 문제를 해결하려고 할 수 있습니다.

- 데이터 세트 소유자에게 연락하고 데이터 새로 고침 일정을 조정하고 공간을 확보하도록 요청합니다.
- 특히 행 수준 보안을 적용하는 불필요한 대시보드 또는 대시보드 타일을 제거하여, 데이터 세트 쿼리 부하를 줄입니다.
- 파워 쿼리 논리를 최적화하여 데이터 새로 고침 속도를 향상시킵니다. 계산된 열 또는 테이블 모델링을 개선합니다. 데이터 세트 크기를 줄이거나 또는 증분 데이터 새로 고침을 수행하기 위해 더 큰 데이터 세트를 구성합니다.

## <a name="identifying-slow-responding-datasets"></a>느리게 응답하는 데이터 세트 식별

이 시나리오에서는 사용자가 특정 보고서를 여는데 너무 오래 걸리고 때때로 중단되었다고 불평할 때 조사가 시작되었습니다.

Power BI 관리자는 앱에서 **평균 기간**을 내림차순으로 데이터 세트를 정렬하여 가장 성능이 낮은 데이터 세트를 결정하기 위해 **쿼리 기간** 시각적 개체를 사용할 수 있습니다. 이 시각적 개체는 데이터 세트 쿼리 개수도 표시하므로 데이터 세트가 얼마나 자주 쿼리되는지 확인할 수 있습니다.

![성능이 가장 낮은 데이터 집합](media/service-premium-capacity-scenarios/worst-performing-datasets.png)

관리자는 필터링된 기간에 대한 버킷 쿼리 성능(< = 30ms, 0 100ms)의 전체 분포를 보여 주는 **쿼리 기간 분포** 시각적 개체를 참조할 수 있습니다. 일반적으로 1초 이하가 걸리는 쿼리는 대부분의 사용자에게 응답성이 좋은 것으로 간주됩니다. 더 오래 걸리는 쿼리는 성능이 나쁘다는 인식을 만드는 경향이 있습니다.

Power BI 관리자는 **시간별 쿼리 기간 분포** 시각적 개체를 사용하여 용량 성능 저하로 인식될 수 있는 경우의 1시간 기간을 식별할 수 있습니다. 1초 이상의 쿼리 기간을 나타내는 막대 세그먼트가 클수록, 사용자가 성능 저하를 인식할 위험이 커집니다.

시각적 개체는 대화형이 고 막대의 세그먼트를 선택할 경우 해당 **쿼리 기간** 테이블 보고서 페이지의 시각적 개체는 나타내는 데이터 집합 표시를 교차 필터링 합니다. 이 교차 필터링 하는 데이터 집합의 응답 속도가 Power BI 관리자가 쉽게 식별할 수 있습니다.

다음 이미지는 기준으로 필터링 된 시각적 개체를 보여 줍니다 **시간별 쿼리 기간 분포**1 시간 버킷의 성능이 가장 낮은 데이터 집합에 초점을 합니다. 

![필터링 된 시간별 쿼리 기간 분포 visual 데이터 집합을 수행 나타낼지를 보여 줍니다.](media/service-premium-capacity-scenarios/hourly-query-duration-distributions.png)

특정 1 시간에서 저하 수행 하 고 데이터 집합을 식별 한 후 Power BI 관리자 성능 저하 용량을 오버 로드 된 문제의 원인은 잘못 인해 데이터 집합 또는 보고서를 설계 하는지 여부를 조사할 수 있습니다. 참조할 수 있는 합니다 **쿼리 대기 시간** 시각적 개체 및 평균 쿼리 대기 시간을 내림차순으로 정렬 데이터 집합입니다. 쿼리의 비율을 대기 중인 경우 데이터 집합에 대 한 수요가 너무 많은 쿼리 대기 원인이 될 합니다. 평균 쿼리 대기 시간이 상당한 경우 (> 100ms), 데이터 집합 및 최적화를 설정할 수 없으면 보려는 보고서를 검토 될 수 있습니다. 예를 들어, 더 적은 시각적 개체에는 보고서 페이지 또는 DAX 식 최적화 지정.

![쿼리 대기 시간 표시 하면 성능이 낮은 데이터 집합 표시](media/service-premium-capacity-scenarios/query-wait-times.png)

가지 데이터 집합에 쿼리 대기 시간 누적 되어에 대 한 몇 가지 가능한 이유가 있습니다.

- 최적이 아닌 모델 디자인, 측정값 식 또는 보고서 디자인-느려지게 할 수 있는 모든 상황 장기 높은 수준의 CPU 사용 하는 쿼리를 실행 합니다. 이렇게 하면 새 쿼리가 CPU 스레드를 사용할 수 있으며 일반적으로 가장 바쁜 업무 시간을 표시 하는 호위 (convoy) 효과 (인지 트래픽 걸림)를 만들 수 있습니다 때까지 대기 하도록 합니다. 합니다 **쿼리 대기** 페이지에는 주 리소스 데이터 집합 평균 높은 쿼리 대기 시간이 있는지 확인 됩니다.
- 많은 수의 동시 용량 사용자 (수백 ~ 수천 개)를 동일한 보고서 또는 데이터 집합을 사용 합니다. 도 잘 설계 된 데이터 집합은 동시성 임계값을 초과 잘못 수행할 수 있습니다. 이 속성은 일반적으로 쿼리를 다른 데이터 집합 표시 보다 계산 하기 위한 크게 더 높은 값을 보여 주는 단일 데이터 집합으로 표시 됩니다 (예를 들어 300 K 쿼리 한 데이터 집합 비교에 대 한 < 다른 모든 데이터 집합에 대 한 30 K 쿼리). 특정 시점에 쿼리 대기를 태거 하기 위해이 데이터 집합은 시작에서 확인할 수 있습니다 합니다 **쿼리 기간** visual 합니다.
- 많은 서로 다른 데이터 집합 쿼리를 동시에 데이터 집합 메모리를 드나드는 자주 주기로 쓰 래 싱 발생 합니다. 이 인해 사용자가 데이터 집합을 메모리로 로드 될 때 성능 저하를 경험 합니다. Power BI 관리자 참조 수를 확인 하려면 합니다 **시간별 데이터 집합에 대 한 및 메모리 소비** 시각적 개체를 메모리에 많은 수의 데이터 집합 로드 되도록 할 수도 있습니다는 반복적으로 제거 됩니다.

## <a name="identifying-causes-for-sporadically-slow-responding-datasets"></a>산발적으로 느리게 응답하는 데이터 세트에 대한 원인 식별

이 시나리오에서는, 보고서 시각적 개체가 가끔은 응답 시간이 느리거나 응답하지 않지만 가끔은 만족스럽게 응답성이 뛰어나다고 사용자가 설명하여 조사가 시작됩니다.

앱 내에서, **쿼리 기간** 섹션이 다음과 같은 방식으로 원인 데이터 세트를 찾는 데 사용되었습니다.

- **쿼리 기간** 시각적 개체에서 관리자가 데이터 세트별로 데이터 세트를 필터링(쿼리된 최상위 데이터 집합에서 시작)하고 **시간별 쿼리 분포** 시각적 개체에서 교차 필터링된 막대를 검토합니다.
- 단일 1시간 가로 막대에서 모든 쿼리 기간 그룹과 해당 세이트 세트의 다른 1시간 막대와 비교했을 때 비율에서 큰 변화가 나타난 경우(예를 들어 색 간의 비율이 현저하게 변화), 이는 데이터 세트가 성능에서 산발적인 변화를 보여주는 것을 의미합니다.
- 성능 저하 쿼리의 불규칙한 부분을 나타내는 1시간 막대는 해당 데이터 세트가 다른 데이터 세트의 활동에 의해 발생된 시끄러운 이웃 효과에 영향을 받은 시간대를 나타냅니다.

1 년 1 월 30 일에 아래 이미지 데이터 집합의 성능에 상당한 요즘 발생에 나타난 크기 버킷의"(3,10s]" 실행 기간입니다. 해당 1 시간 표시줄을 클릭 하면 모든 데이터 집합을 시간 동안 메모리에 로드 시끄러운 이웃 효과 발생 가능한 데이터 집합 표시 나타납니다.

![가장 낮은 성능에서 많은 부분을 보여 주는 가로 막대형](media/service-premium-capacity-scenarios/worst-performing-queries.png)

문제가 발생하는 시간대(예를 들어 위의 이미지에서 1월 30일 동안)가 식별되면 Power BI 관리자는 모든 데이터 세트 필터를 제거한 다음 이 시간 동안에 적극적으로 쿼리된 데이터 세트를 확인하기 위해 해당 시간대를 기준으로 필터링할 수 있습니다. 시끄러운 이웃 효과에 대한 원인 데이터 세트는 일반적으로 매우 자주 쿼리되는 데이터 세트 또는 평균 쿼리 기간이 매우 긴 데이터 세트입니다.

이 문제의 해결책은 다른 프리미엄 용량의 다른 작업 영역 또는 데이트 세트 크기, 소비 요구사항 및 데이터 새로 고침 패턴이 지원되는 공유 용량의 작업 영역으로 원인 데이터 세트를 배포하는 것입니다.

반대도 가능할 수 있습니다. Power BI 관리자는 데이터 세트 쿼리 성능이 크게 향상되는 시간을 식별한 다음 무엇이 사라졌는지 확인합니다. 만약 그 시점에 특정 정보가 없는 경우, 그 정보가 원인이 되는 문제를 찾는 데 도움이 될 수 있습니다.

## <a name="determining-whether-there-is-enough-memory"></a>메모리가 충분한지 여부를 결정

용량이 워크로드를 완료하기에 메모리가 충분한지 확인하려면, Power BI 관리자는 앱의 **데이터 집합** 탭에서 **사용된 메모리 비율** 시각적 개체를 참조할 수 있습니다. **All**(전체) 메모리는 적극적으로 쿼리 또는 처리되는지 여부에는 관계 없이 메모리에 로드된 데이터 세트에 의해 사용된 메모리를 나타냅니다. **활성** 메모리는 적극적으로 처리되는 중인 데이터 세트에 의해 사용된 메모리를 나타냅니다.

정상적인 용량에서는 시각적 개체가 All(전체)과 활성 메모리 사이의 간격을 다음처럼 표시합니다.

![용량을 정상는 모든 (합계) 사이의 간격을 표시 및 활성 메모리](media/service-premium-capacity-scenarios/memory-healthy-capacity.png)

메모리 부족이 발생하는 용량에서는, 동일한 시각적 개체는 활성 메모리 및 총 메모리가 만나는 것을 명확하게 보여줄 것이며, 이는 추가 데이터 세트를 메모리에 로드하는 것이 불가능하다는 것을 의미합니다. 이 경우, Power BI 관리자는 **용량 다시 시작**(관리 포털의 용량 설정 영역의 **고급 옵션**에서)을 클릭할 수 있습니다. 용량을 다시 시작하게 되면 모든 데이터 세트가 메모리에서 플러시되고 필요에 따라(쿼리 또는 데이터 새로 고침) 메모리로 다시 로드될 수 있습니다.

![\* * 활성 * 메모리를 사용 하 여 수렴 * * 모든 * * 메모리](media/service-premium-capacity-scenarios/memory-unhealthy-capacity.png)

## <a name="determining-whether-there-is-enough-cpu"></a>CPU가 충분한지 여부를 결정

일반적으로 용량의 평균 CPU 사용률이 80% 이하로 유지 되어야 합니다. 이 값을 초과 하는 용량에 근접 하 고 CPU 포화 의미 합니다.

CPU 포화의 효과 모든 작업을 처리 하려고 하는 대로 많은 CPU 컨텍스트 스위치를 수행 하는 용량으로 인해 말아야 보다 오래 걸리는 작업에 의해 표현 됩니다. 많은 수의 동시 쿼리를 사용 하 여 프리미엄 용량에서 높은 쿼리 대기 시간으로 표시 됩니다. 높은 쿼리 대기 시간에 따른 평소 보다 느린 응답입니다. Power BI 관리자에는 확인 하 여 CPU 포화 상태일 때 쉽게 식별할 수는 **시간별 쿼리 대기 시간 분포** visual 합니다. 정기적인 최대 쿼리 대기 시간 개수 잠재적인 CPU 채도 나타내는입니다.

![정기적인 최대 쿼리 대기 시간 잠재적인 CPU 포화를 나타낼 수](media/service-premium-capacity-scenarios/peak-query-wait-times.png)

CPU 포화에 영향을 주는 경우 백그라운드 작업에서 비슷한 패턴을 검색 때로는 수 있습니다. Power BI 관리자 (아마도 때문에 다른 지속적인 데이터 집합 새로 고침 및/또는 대화형 쿼리) 시 CPU 포화를 나타낼 수 있는 특정 데이터 집합에 대 한 새로 고침 시간에 정기적으로 급증을 찾을 수 있습니다. 이 인스턴스에서 참조 하는 **시스템** 보기 앱에서 CPU가 100%는 반드시 표시 하지 않을 수도 있습니다. 합니다 **시스템** 시간당 평균을 표시 하지만 대기 시간이 급증으로 나타납니다는 많은 작업의 몇 분 동안 CPU를 포화 될 수 있습니다.

더 미묘한 CPU 포화의 효과 보는 데 있습니다. 대기 하는 쿼리 수는 중요 하지만, 쿼리 대기 시간 항상 발생 어느 정도 수준까지 눈에 띄는 성능 저하 없이 합니다. 일부 데이터 집합 (긴 평균 쿼리 시간, 복잡성 또는 크기를 나타내는) 경우 다른 사용자 보다 CPU 포화 미치는 발생 가능성이 더 이러한 데이터 집합을 쉽게 식별 하려면 Power BI 관리자에서 막대의 색 구성에서 변경 내용을 볼 수는 **시간별 대기 시간 분포** visual 합니다. 이상 표시줄을 길게, 후이 시간 동안 쿼리 대기 해야 하는 데이터 집합에 대 한 모양 및 평균 쿼리 기간에 비해 평균 쿼리 대기 시간을 살펴볼 수도 있습니다. 두 메트릭은 동일한 크기의 데이터 집합에 대 한 쿼리 워크 로드는 trivial이 아닌 경우 데이터 집합 부족 하 여 CPU의 영향을 받는 가능성이 높습니다.

이 효과 일시적인 작업량 증가 (예를 들어, 교육 세션의 경우)에서 여러 사용자가 자주 쿼리 하는 각 버스트 하는 동안 CPU 포화에서 결과 데이터 집합 사용 되는 경우 특히 뚜렷하게 나타납니다 수 있습니다. 이 경우 다른 데이터 집합의 용량 (시끄러운 이웃 영향을 주지)에 영향을 주는 뿐만 아니라에서이 데이터 집합에서 중요 한 쿼리 대기 시간을 경험할 수 있습니다.

작음 데이터 집합 소유자가 만든 Power BI 관리자 수 요청 하는 경우에 따라 보고서 대신 (캐시 된 타일에 대 한 쿼리 데이터 집합을 사용 하 여 주기적으로 새로 고침) 대시보드를 만들면 volatile 쿼리 워크 로드. 이 대시보드를 로드할 때 급증을 방지 하기 수 있습니다. 이 솔루션 항상 못할에 대 한 비즈니스 요구 사항에 지정 된 데이터 집합에 변경 하지 않고 CPU 포화를 방지 하는 효과적인 방법 수 있지만.

## <a name="acknowledgements"></a>승인

이 문서는 [Bitwise Solutions](https://www.bitwisesolutions.com.au/)의 독립 BI 전문가이며 Data Platform MVP인 Peter Myers가 작성했습니다.

## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [앱을 사용 하 여 프리미엄 용량 모니터링](service-admin-premium-monitor-capacity.md)    
> [!div class="nextstepaction"]
> [관리 포털에서 용량 모니터링](service-admin-premium-monitor-portal.md)   

궁금한 점이 더 있나요? [Power BI 커뮤니티에 질문합니다.](https://community.powerbi.com/)

||||||
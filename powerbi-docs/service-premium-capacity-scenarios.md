---
title: Microsoft Power BI 프리미엄 용량 시나리오
description: 일반적인 Power BI 프리미엄 용량 시나리오를 설명합니다.
author: mgblythe
ms.author: mblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: conceptual
ms.date: 04/09/2019
ms.custom: seodec18
LocalizationGroup: Premium
ms.openlocfilehash: 1d666a6702515a935d93549d026f207848f2bca8
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/29/2019
ms.locfileid: "65565342"
---
# <a name="premium-capacity-scenarios"></a>프리미엄 용량 시나리오

이 문서는 Power BI 프리미엄 용량 구현 된 실제 시나리오를 설명 합니다. 일반적인 문제 및 문제 수도 문제를 식별 하는 방법을 설명 하 고 해결 하는 데 도움이:

- [데이터 집합을 최신 상태로 유지](#keeping-datasets-up-to-date)
- [느린 응답 하는 데이터 집합을 식별](#identifying-slow-responding-datasets)
- [산발적으로 느린 응답에 대 한 원인을 식별 데이터 집합](#identifying-causes-for-sporadically-slow-responding-datasets)
- [충분 한 메모리가 있는지 여부를 결정 합니다.](#determining-whether-there-is-enough-memory)
- [충분 한 CPU 있는지 여부를 결정 합니다.](#determining-whether-there-is-enough-cpu)

차트 및 테이블 예제와 함께 하는 단계에는 합니다 **Power BI Premium 용량 메트릭을 앱** 있는 Power BI 관리자에 대 한 액세스 권한을 갖습니다.

## <a name="keeping-datasets-up-to-date"></a>데이터 집합을 최신 상태로 유지

이 시나리오에서는 보고서 데이터가 이전 또는 "부실" 경우에 따라 표시 되는 사용자가 불평 하는 경우는 조사를 트리거 했습니다.

앱에서 관리자와 상호 작용 하는 **새로 고칩니다** 시각적 개체를 정렬 하 여 데이터 집합을 **최대 대기 시간** 내림차순 통계. 이 시각적 개체 하면 있는 가장 긴 대기 시간, 작업 영역 이름으로 그룹화 하는 데이터 집합을 표시할 수 있습니다.

![작업 영역에서 그룹화 되는 최대 대기 시간을 내림차순으로 정렬 된 데이터 집합 새로 고침](media/service-premium-capacity-scenarios/dataset-refreshes.png)

에 **시간당 평균 새로 고침 대기 시간** 시각적 개체는 알 수 있습니다 새로 고침 대기 시간이 최대 4PM 경에 매일 일관 되 게 합니다.

![새로 고침 오후 4 시 주기적으로 최대 대기](media/service-premium-capacity-scenarios/peak-refresh-waits.png)

이러한 결과 대 한 가능한 설명 여러 가지가 있습니다.

- 새로 고침 시도 너무 많이 발생할 수, 동시에 용량 노드에 의해 정의 된 제한을 초과 합니다. 이 경우 기본 메모리 할당을 사용 하 여 P1에서 6 개의 동시 새로 고침입니다.

- 데이터 집합 새로 고침 (전체 새로 고침에 필요한 메모리 x 2 이상 필요) 하는 사용 가능한 메모리에 맞게 너무 클 수 있습니다.
- 비효율적인 파워 쿼리 논리 데이터 집합 새로 고침 하는 동안 메모리 사용량이 갑자기 초당 발생 될 수 있습니다. 사용 중인 용량에 대 한이 급증 새로 고침이 실패 하 고 잠재적으로 용량에서 다른 보고서 뷰 작업에 영향을 주는, 물리적 제한이 따라 연결할 수 있습니다.
- 메모리에 유지 해야 하는 자주 쿼리 데이터 집합 사용 가능한 메모리 제한으로 인해 새로 고침 하는 다른 데이터 집합의 기능에 영향을 줄 수 있습니다.

조사를 위해 Power BI 관리자에 대 한 같을 수 있습니다.

- 사용 가능한 메모리 보다 작은 크기를 2 배로 새로 고칠 데이터 집합의 경우 데이터 당시 사용 가능한 메모리를 새로 고칩니다.
- 데이터 집합 새로 고침 및 새로 고침 하기 전에 메모리에 없는 대화형 트래픽 과도 한 새로 고침 시간 표시를 아직 시작 되지 않습니다. 언제 든 지 어떤 데이터 집합을 메모리에 로드를 보려면 Power BI 관리자 살펴볼 수의 데이터 집합 영역 **데이터 집합** 앱에서 탭 합니다. 관리자의 가로 막대 중 하나를 클릭 하 여 다음 필터를 지정된 된 시간을 넘을 수는 **시간별 로드 된 데이터 집합 계산**합니다. 아래 그림과에서 같이 로컬 급증, 여러 데이터 집합 예약 된 새로 고침의 시작을 지연할 수 있는 메모리에 로드 된 경우 시간을 나타냅니다.
- 데이터 새로 고침 시작 하도록 예약 되어 수행 하는 향상 된 데이터 집합 제거를 놓습니다. 높은 메모리 부족 원인은 새로 고침 시간 전에 너무 많은 다양 한 대화형 보고서 처리에 대 한 있습니다 나타낼 수 있습니다. 합니다 **시간별 데이터 집합에 대 한 및 메모리 소비** visual 제거 급증을 명확 하 게 나타낼 수 있습니다.

다음 이미지는 로드 된 데이터 집합에서 로컬 스파이크를 보여 줍니다. 대화형 쿼리를 제안 하는 지연 된 시작 새로 고침 합니다. 기간을 선택 하는 **시간별 로드 된 데이터 집합 계산** 시각적 개체는 교차 필터링 합니다 **데이터 집합 크기** visual 합니다.

![로드 된 데이터 집합의 로컬 급증 제안 새로 고침의 대화형 쿼리 지연 된 시작](media/service-premium-capacity-scenarios/hourly-loaded-dataset-counts.png)

Power BI 관리자를 시작 하려면 데이터 새로 고침에 사용할 수 있는 메모리가 충분 한지 확인 하는 단계를 수행 하 여 문제를 해결 하려고 할 수 있습니다.

- 연결 데이터 집합 소유자 및 갑니다 태거 및 공간 데이터를 새로 고침 일정.
- 데이터 집합을 줄이는 불필요 한 대시보드 또는 대시보드를 제거 하 여 쿼리 로드 타일, 특히 행 수준 보안을 적용 하는 합니다.
- 파워 쿼리 논리를 최적화 하 여 데이터 새로 고침 속도가 빨라집니다. 계산된 열 또는 테이블 모델링을 개선 합니다. 데이터 집합 크기를 줄이거나 증분 데이터 새로 고침을 수행 하려면 더 큰 데이터 집합을 구성 합니다.

## <a name="identifying-slow-responding-datasets"></a>느린 응답 하는 데이터 집합을 식별

이 시나리오에서는 조사 시작 사용자는 특정 보고서 너무 길어서를 열려면 불평 하는 경우 및 시간에 중단 됩니다.

Power BI 관리자는 앱에서 사용할 수는 **쿼리 기간** 데이터 집합을 내림차순으로 정렬 하 여 성능이 가장 낮은 데이터 집합을 확인 하려면 visual **평균 기간**합니다. 이 시각적 개체도 개수를 표시 데이터 집합 쿼리를 데이터 집합 쿼리는 얼마나 자주 볼 수 있도록 합니다.

![성능이 가장 낮은 데이터 집합](media/service-premium-capacity-scenarios/worst-performing-datasets.png)

관리자를 참조할 수는 **쿼리 기간 분포** 버킷 팅된 쿼리 성능의 전체 분포를 보여 주는 시각적 개체를 (< = 30ms, 0 100ms) 필터링 된 기간에 대 한 합니다. 1 초를 사용 하거나 적은 응답에서 고려할 대부분의 사용자 쿼리 일반적으로 시간이 오래 걸리는 쿼리 성능 저하를 인지를 만드는 경향이 있습니다.

합니다 **시간별 쿼리 기간 분포** visual으로 잘못 된 경우 용량 성능 수 있는 된 인식 한 시간 기간을 식별 하려면 Power BI 관리자 허용 합니다. 클수록 막대 세그먼트를 나타내는 쿼리를 사용 하는 기간 1 초 넘게, 더 큰 위험 사용자가 성능 저하를 느끼게 됩니다.

시각적 개체는 대화형이 고 막대의 세그먼트를 선택할 경우 해당 **쿼리 기간** 테이블 보고서 페이지의 시각적 개체는 나타내는 데이터 집합 표시를 교차 필터링 합니다. 이 교차 필터링 하는 데이터 집합의 응답 속도가 Power BI 관리자가 쉽게 식별할 수 있습니다.

다음 이미지는 기준으로 필터링 된 시각적 개체를 보여 줍니다 **시간별 쿼리 기간 분포**1 시간 버킷의 성능이 가장 낮은 데이터 집합에 초점을 합니다. 

![필터링 된 시간별 쿼리 기간 분포 visual 데이터 집합을 수행 나타낼지를 보여 줍니다.](media/service-premium-capacity-scenarios/hourly-query-duration-distributions.png)

특정 1 시간에서 저하 수행 하 고 데이터 집합을 식별 한 후 Power BI 관리자 성능 저하 용량을 오버 로드 된 문제의 원인은 잘못 인해 데이터 집합 또는 보고서를 설계 하는지 여부를 조사할 수 있습니다. 참조할 수 있는 합니다 **쿼리 대기 시간** 시각적 개체 및 평균 쿼리 대기 시간을 내림차순으로 정렬 데이터 집합입니다. 쿼리의 비율을 대기 중인 경우 데이터 집합에 대 한 수요가 너무 많은 쿼리 대기 원인이 될 합니다. 평균 쿼리 대기 시간이 상당한 경우 (> 100ms), 데이터 집합 및 최적화를 설정할 수 없으면 보려는 보고서를 검토 될 수 있습니다. 예를 들어, 더 적은 시각적 개체에는 보고서 페이지 또는 DAX 식 최적화 지정.

![쿼리 대기 시간 표시 하면 성능이 낮은 데이터 집합 표시](media/service-premium-capacity-scenarios/query-wait-times.png)

가지 데이터 집합에 쿼리 대기 시간 누적 되어에 대 한 몇 가지 가능한 이유가 있습니다.

- 최적이 아닌 모델 디자인, 측정값 식 또는 보고서 디자인-느려지게 할 수 있는 모든 상황 장기 높은 수준의 CPU 사용 하는 쿼리를 실행 합니다. 이렇게 하면 새 쿼리가 CPU 스레드를 사용할 수 있으며 일반적으로 가장 바쁜 업무 시간을 표시 하는 호위 (convoy) 효과 (인지 트래픽 걸림)를 만들 수 있습니다 때까지 대기 하도록 합니다. 합니다 **쿼리 대기** 페이지에는 주 리소스 데이터 집합 평균 높은 쿼리 대기 시간이 있는지 확인 됩니다.
- 많은 수의 동시 용량 사용자 (수백 ~ 수천 개)를 동일한 보고서 또는 데이터 집합을 사용 합니다. 도 잘 설계 된 데이터 집합은 동시성 임계값을 초과 잘못 수행할 수 있습니다. 이 속성은 일반적으로 쿼리를 다른 데이터 집합 표시 보다 계산 하기 위한 크게 더 높은 값을 보여 주는 단일 데이터 집합으로 표시 됩니다 (예를 들어 300 K 쿼리 한 데이터 집합 비교에 대 한 < 다른 모든 데이터 집합에 대 한 30 K 쿼리). 특정 시점에 쿼리 대기를 태거 하기 위해이 데이터 집합은 시작에서 확인할 수 있습니다 합니다 **쿼리 기간** visual 합니다.
- 많은 서로 다른 데이터 집합 쿼리를 동시에 데이터 집합 메모리를 드나드는 자주 주기로 쓰 래 싱 발생 합니다. 이 인해 사용자가 데이터 집합을 메모리로 로드 될 때 성능 저하를 경험 합니다. Power BI 관리자 참조 수를 확인 하려면 합니다 **시간별 데이터 집합에 대 한 및 메모리 소비** 시각적 개체를 메모리에 많은 수의 데이터 집합 로드 되도록 할 수도 있습니다는 반복적으로 제거 됩니다.

## <a name="identifying-causes-for-sporadically-slow-responding-datasets"></a>산발적으로 느린 응답에 대 한 원인을 식별 데이터 집합

이 시나리오에서는, 보고서 시각적 개체가 때때로 응답 시간이 느리거나 응답하지 않지만 다른 시간에는 만족스럽게 응답성이 뛰어난 경우를 사용자가 설명 하는 경우 조사가 시작됩니다.

앱 내에서, **쿼리 기간** 섹션이 다음과 같은 방식으로 원인 데이터 세트를 찾는데 사용됩니다.

- **쿼리 기간** 시각적 개체에서 관리자가 데이터 세트별로 데이터 집합을 필터(쿼리된 최상위 데이터 집합에서 시작)하고 **시간별 쿼리 분포** 시각적 개체에서 교차 필터링된 막대를 검토합니다.
- 단일 1 시간 가로 막대가 모든 쿼리 기간 그룹과 해당 세이트 세트의 다른 1시간 막대 간의 비율에서 큰 변경이 표시된 경우(예를 들어 색 간의 비율이 현저하게 바뀌는), 그것은 데이터 세트가 성능에서 산발적인 변화를 보여주는 것을 의미합니다.
- 성능 저하 쿼리의 불규친한 부분을 나타내는 1 시간 막대는 해당 데이터 세트가 다른 데이터 세트의 활동에 의해 발생된 시끄러운 이웃 효과에 영향을 받는 시간대를 나타냅니다.

아래 이미지는 "(3,10s]" 실행 기간 버킷의 크기로 표시되고, 데이터 세트의 성능이 크게 저하된 1 월 30 일 1 시간을 표시합니다. 해당 1 시간 막대를 클릭하면 해당 시간 동안 메모리에 로드된 모든 데이터 세트를 표시하며, 시끄러운 이웃 효과를 발생시키는 가능한 데이터 집합을 표시합니다.

![가장 낮은 성능에서 많은 부분을 보여 주는 가로 막대형](media/service-premium-capacity-scenarios/worst-performing-queries.png)

문제가 발생하는 시간대 (예를 들어 위의 이미지에서 1 월 30 동안) 식별되면 Power BI 관리자는 모든 데이터 집합 필터를 제거한 다음 이 시간 동안에 적극적으로 쿼리된 데이터 세트를 확인하기 위해 해당 시간대를 기준으로 필터링할 수 있습니다. 시끄러운 이웃 효과에 대한 원인 데이터 세트는 일반적으로 상위 쿼리 데이터 집합이거나 가장 긴 평균 쿼리 기간을 사용합니다.

이 문제의 해결책은 다른 프리미엄 용량의 다른 작업 영역 또는 데이트 세트 크기, 소비 요구사항 및 데이터 새로 고침 패턴이 지원되는 공유 용량의 작업 영역으로 원인 데이터 세트를 배포하는 것입니다.

반대로 사실일 수 있습니다. Power BI 관리자는 데이터 세트 쿼리 성능이 크게 향상되는 시간을 식별한 다음 무엇이 사라진 것인지 확인합니다. 만약 그 시점에 특정 정보가 누락된 경우, 그 정보가 원인 문제를 가리키는데 도움이 될 수 있습니다.

## <a name="determining-whether-there-is-enough-memory"></a>충분 한 메모리가 있는지 여부를 결정 합니다.

용량이 워크로드를 완료하기에 메모리가 충분한지 확인하려면, Power BI 관리자는 앱의 **데이터 집합** 탭에서 **사용된 메모리 비율** 시각적 개체를 참조할 수 있습니다. **All**(전체) 메모리는 적극적으로 쿼리 또는 처리 여부에 관계없이 메모리에 로드된 데이터 세트에 의해 사용된 메모리를 나타냅니다. **활성** 메모리는 적극적으로 처리 중인 데이터 세트에 의해 사용된 메모리를 나타냅니다.

정상적인 용량에서는 시각적 개체가 All(전체)과 활성 메모리 사이의 간격을 다음처럼 표시합니다:

![용량을 정상는 모든 (합계) 사이의 간격을 표시 및 활성 메모리](media/service-premium-capacity-scenarios/memory-healthy-capacity.png)

메모리 부족이 발생하는 용량에서는, 동일한 시각적 개체는 활성 메모리 및 총 메모리가 만나는 것을 명확하게 보여줄 것이며, 이는 추가 데이터 세트를 메모리에 로드하는 것이 불가능하다는 것을 의미합니다. 이 경우, Power BI 관리자는 **용량 다시 시작**(관리 포털의 용량 설정 영역의 **고급 옵션**에서)을 클릭할 수 있습니다. 용량을 다시 시작하게 되면 모든 데이터 세트가 메모리에서 플러시되고 필요에 따라(쿼리 또는 데이터 새로 고침) 메모리로 다시 로드될 수 있습니다.

![* * 활성 * 메모리를 사용 하 여 수렴 * * 모든 * * 메모리](media/service-premium-capacity-scenarios/memory-unhealthy-capacity.png)

## <a name="determining-whether-there-is-enough-cpu"></a>충분 한 CPU 있는지 여부를 결정 합니다.

일반적으로 용량의 평균 CPU 사용률이 80% 이하로 유지 되어야 합니다. 이 값을 초과 하는 용량에 근접 하 고 CPU 포화 의미 합니다.

CPU 포화의 효과 모든 작업을 처리 하려고 하는 대로 많은 CPU 컨텍스트 스위치를 수행 하는 용량으로 인해 말아야 보다 오래 걸리는 작업에 의해 표현 됩니다. 많은 수의 동시 쿼리를 사용 하 여 프리미엄 용량에서 높은 쿼리 대기 시간으로 표시 됩니다. 높은 쿼리 대기 시간에 따른 평소 보다 느린 응답입니다. Power BI 관리자에는 확인 하 여 CPU 포화 상태일 때 쉽게 식별할 수는 **시간별 쿼리 대기 시간 분포** visual 합니다. 정기적인 최대 쿼리 대기 시간 개수 잠재적인 CPU 채도 나타내는입니다.

![정기적인 최대 쿼리 대기 시간 잠재적인 CPU 포화를 나타낼 수](media/service-premium-capacity-scenarios/peak-query-wait-times.png)

CPU 포화에 영향을 주는 경우 백그라운드 작업에서 비슷한 패턴을 검색 때로는 수 있습니다. Power BI 관리자 (아마도 때문에 다른 지속적인 데이터 집합 새로 고침 및/또는 대화형 쿼리) 시 CPU 포화를 나타낼 수 있는 특정 데이터 집합에 대 한 새로 고침 시간에 정기적으로 급증을 찾을 수 있습니다. 이 인스턴스에서 참조 하는 **시스템** 보기 앱에서 CPU가 100%는 반드시 표시 하지 않을 수도 있습니다. 합니다 **시스템** 시간당 평균을 표시 하지만 대기 시간이 급증으로 나타납니다는 많은 작업의 몇 분 동안 CPU를 포화 될 수 있습니다.

더 미묘한 CPU 포화의 효과 보는 데 있습니다. 대기 하는 쿼리 수는 중요 하지만, 쿼리 대기 시간 항상 발생 어느 정도 수준까지 눈에 띄는 성능 저하 없이 합니다. 일부 데이터 집합 (긴 평균 쿼리 시간, 복잡성 또는 크기를 나타내는) 경우 다른 사용자 보다 CPU 포화 미치는 발생 가능성이 더 이러한 데이터 집합을 쉽게 식별 하려면 Power BI 관리자에서 막대의 색 구성에서 변경 내용을 볼 수는 **시간별 대기 시간 분포** visual 합니다. 이상 표시줄을 길게, 후이 시간 동안 쿼리 대기 해야 하는 데이터 집합에 대 한 모양 및 평균 쿼리 기간에 비해 평균 쿼리 대기 시간을 살펴볼 수도 있습니다. 두 메트릭은 동일한 크기의 데이터 집합에 대 한 쿼리 워크 로드는 trivial이 아닌 경우 데이터 집합 부족 하 여 CPU의 영향을 받는 가능성이 높습니다.

이 효과 일시적인 작업량 증가 (예를 들어, 교육 세션의 경우)에서 여러 사용자가 자주 쿼리 하는 각 버스트 하는 동안 CPU 포화에서 결과 데이터 집합 사용 되는 경우 특히 뚜렷하게 나타납니다 수 있습니다. 이 경우 다른 데이터 집합의 용량 (시끄러운 이웃 영향을 주지)에 영향을 주는 뿐만 아니라에서이 데이터 집합에서 중요 한 쿼리 대기 시간을 경험할 수 있습니다.

작음 데이터 집합 소유자가 만든 Power BI 관리자 수 요청 하는 경우에 따라 보고서 대신 (캐시 된 타일에 대 한 쿼리 데이터 집합을 사용 하 여 주기적으로 새로 고침) 대시보드를 만들면 volatile 쿼리 워크 로드. 이 대시보드를 로드할 때 급증을 방지 하기 수 있습니다. 이 솔루션 항상 못할에 대 한 비즈니스 요구 사항에 지정 된 데이터 집합에 변경 하지 않고 CPU 포화를 방지 하는 효과적인 방법 수 있지만.

## <a name="acknowledgements"></a>승인

이 문서에서 Peter Myers, 데이터 플랫폼 MVP 이며 독립 BI 전문가로 쓰여진 [비트 솔루션](https://www.bitwisesolutions.com.au/)합니다.

## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [앱을 사용 하 여 프리미엄 용량 모니터링](service-admin-premium-monitor-capacity.md)    
> [!div class="nextstepaction"]
> [관리 포털에서 용량 모니터링](service-admin-premium-monitor-portal.md)   

궁금한 점이 더 있나요? [Power BI 커뮤니티에 질문합니다.](https://community.powerbi.com/)

||||||

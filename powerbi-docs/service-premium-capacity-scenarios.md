---
title: Microsoft Power BI 프리미엄 용량 시나리오
description: 일반적인 Power BI 프리미엄 용량 시나리오를 설명합니다.
author: mgblythe
ms.author: mblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: conceptual
ms.date: 04/09/2019
ms.custom: seodec18
LocalizationGroup: Premium
ms.openlocfilehash: 1d666a6702515a935d93549d026f207848f2bca8
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/29/2019
ms.locfileid: "65565342"
---
# <a name="premium-capacity-scenarios"></a>프리미엄 용량 시나리오

이 문서는 Power BI 프리미엄 용량 구현 된 실제 시나리오를 설명 합니다. 일반적인 문제 및 문제 수도 문제를 식별 하는 방법을 설명 하 고 해결 하는 데 도움이:

- [데이터 집합을 최신 상태로 유지](#keeping-datasets-up-to-date)
- [느린 응답 하는 데이터 집합을 식별](#identifying-slow-responding-datasets)
- [산발적으로 느린 응답에 대 한 원인을 식별 데이터 집합](#identifying-causes-for-sporadically-slow-responding-datasets)
- [충분 한 메모리가 있는지 여부를 결정 합니다.](#determining-whether-there-is-enough-memory)
- [충분 한 CPU 있는지 여부를 결정 합니다.](#determining-whether-there-is-enough-cpu)

차트 및 테이블 예제와 함께 하는 단계에는 합니다 **Power BI Premium 용량 메트릭을 앱** 있는 Power BI 관리자에 대 한 액세스 권한을 갖습니다.

## <a name="keeping-datasets-up-to-date"></a>데이터 집합을 최신 상태로 유지

이 시나리오에서는 보고서 데이터가 이전 또는 "부실" 경우에 따라 표시 되는 사용자가 불평 하는 경우는 조사를 트리거 했습니다.

앱에서 관리자와 상호 작용 하는 **새로 고칩니다** 시각적 개체를 정렬 하 여 데이터 집합을 **최대 대기 시간** 내림차순 통계. 이 시각적 개체 하면 있는 가장 긴 대기 시간, 작업 영역 이름으로 그룹화 하는 데이터 집합을 표시할 수 있습니다.

![작업 영역에서 그룹화 되는 최대 대기 시간을 내림차순으로 정렬 된 데이터 집합 새로 고침](media/service-premium-capacity-scenarios/dataset-refreshes.png)

에 **시간당 평균 새로 고침 대기 시간** 시각적 개체는 알 수 있습니다 새로 고침 대기 시간이 최대 4PM 경에 매일 일관 되 게 합니다.

![새로 고침 오후 4 시 주기적으로 최대 대기](media/service-premium-capacity-scenarios/peak-refresh-waits.png)

이러한 결과 대 한 가능한 설명 여러 가지가 있습니다.

- 새로 고침 시도 너무 많이 발생할 수, 동시에 용량 노드에 의해 정의 된 제한을 초과 합니다. 이 경우 기본 메모리 할당을 사용 하 여 P1에서 6 개의 동시 새로 고침입니다.

- 데이터 집합 새로 고침 (전체 새로 고침에 필요한 메모리 x 2 이상 필요) 하는 사용 가능한 메모리에 맞게 너무 클 수 있습니다.
- 비효율적인 파워 쿼리 논리 데이터 집합 새로 고침 하는 동안 메모리 사용량이 갑자기 초당 발생 될 수 있습니다. 사용 중인 용량에 대 한이 급증 새로 고침이 실패 하 고 잠재적으로 용량에서 다른 보고서 뷰 작업에 영향을 주는, 물리적 제한이 따라 연결할 수 있습니다.
- 메모리에 유지 해야 하는 자주 쿼리 데이터 집합 사용 가능한 메모리 제한으로 인해 새로 고침 하는 다른 데이터 집합의 기능에 영향을 줄 수 있습니다.

조사를 위해 Power BI 관리자에 대 한 같을 수 있습니다.

- 사용 가능한 메모리 보다 작은 크기를 2 배로 새로 고칠 데이터 집합의 경우 데이터 당시 사용 가능한 메모리를 새로 고칩니다.
- 데이터 집합 새로 고침 및 새로 고침 하기 전에 메모리에 없는 대화형 트래픽 과도 한 새로 고침 시간 표시를 아직 시작 되지 않습니다. 언제 든 지 어떤 데이터 집합을 메모리에 로드를 보려면 Power BI 관리자 살펴볼 수의 데이터 집합 영역 **데이터 집합** 앱에서 탭 합니다. 관리자의 가로 막대 중 하나를 클릭 하 여 다음 필터를 지정된 된 시간을 넘을 수는 **시간별 로드 된 데이터 집합 계산**합니다. 아래 그림과에서 같이 로컬 급증, 여러 데이터 집합 예약 된 새로 고침의 시작을 지연할 수 있는 메모리에 로드 된 경우 시간을 나타냅니다.
- 데이터 새로 고침 시작 하도록 예약 되어 수행 하는 향상 된 데이터 집합 제거를 놓습니다. 높은 메모리 부족 원인은 새로 고침 시간 전에 너무 많은 다양 한 대화형 보고서 처리에 대 한 있습니다 나타낼 수 있습니다. 합니다 **시간별 데이터 집합에 대 한 및 메모리 소비** visual 제거 급증을 명확 하 게 나타낼 수 있습니다.

다음 이미지는 로드 된 데이터 집합에서 로컬 스파이크를 보여 줍니다. 대화형 쿼리를 제안 하는 지연 된 시작 새로 고침 합니다. 기간을 선택 하는 **시간별 로드 된 데이터 집합 계산** 시각적 개체는 교차 필터링 합니다 **데이터 집합 크기** visual 합니다.

![로드 된 데이터 집합의 로컬 급증 제안 새로 고침의 대화형 쿼리 지연 된 시작](media/service-premium-capacity-scenarios/hourly-loaded-dataset-counts.png)

Power BI 관리자를 시작 하려면 데이터 새로 고침에 사용할 수 있는 메모리가 충분 한지 확인 하는 단계를 수행 하 여 문제를 해결 하려고 할 수 있습니다.

- 연결 데이터 집합 소유자 및 갑니다 태거 및 공간 데이터를 새로 고침 일정.
- 데이터 집합을 줄이는 불필요 한 대시보드 또는 대시보드를 제거 하 여 쿼리 로드 타일, 특히 행 수준 보안을 적용 하는 합니다.
- 파워 쿼리 논리를 최적화 하 여 데이터 새로 고침 속도가 빨라집니다. 계산된 열 또는 테이블 모델링을 개선 합니다. 데이터 집합 크기를 줄이거나 증분 데이터 새로 고침을 수행 하려면 더 큰 데이터 집합을 구성 합니다.

## <a name="identifying-slow-responding-datasets"></a>느린 응답 하는 데이터 집합을 식별

이 시나리오에서는 사용자가 특정 보고서를 여는데 너무 오래 걸리고 때때로 중단되었다고 불평할 때 조사가 시작되었습니다.

Power BI 관리자는 앱에서 **평균 기간**을 내림차순으로 데이터 세트를 정렬하여 가장 성능이 낮은 데이터 세트를 결정하기 위해 **쿼리 기간** 시각적 개체를 사용할 수 있습니다. 이 시각적 개체는 데이터 세트 쿼리 개수도 표시하므로 데이터 세트가 얼마나 자주 쿼리되는지 확인할 수 있습니다.

![성능이 가장 낮은 데이터 집합](media/service-premium-capacity-scenarios/worst-performing-datasets.png)

관리자는 필터링된 기간에 대한 버킷 쿼리 성능(< = 30ms, 0 100ms)의 전체 분포를 보여 주는 **쿼리 기간 분포** 시각적 개체를 참조할 수 있습니다. 일반적으로 1초 이하가 걸리는 쿼리는 대부분의 사용자에게 응답성이 좋은 것으로 간주됩니다. 더 오래 걸리는 쿼리는 성능이 나쁘다는 인식을 만드는 경향이 있습니다.

Power BI 관리자는 **시간별 쿼리 기간 분포** 시각적 개체를 사용하여 용량 성능 저하로 인식될 수 있는 경우의 1시간 기간을 식별할 수 있습니다. 1초 이상의 쿼리 기간을 나타내는 막대 세그먼트가 클수록, 사용자가 성능 저하를 인식할 위험이 커집니다.

시각적 개체가 대화형이고 막대의 세그먼트를 선택할 경우, 보고서 페이지의 해당 **쿼리 기간** 테이블 시각적 개체는 나타내는 데이터 세트를 표시하기 위해 교차 필터링됩니다. Power BI 관리자는 이 교차 필터링으로 응답 속도가 느린 데이터 세트를 쉽게 식별할 수 있습니다.

다음 이미지는 **시간별 쿼리 기간 분포** 기준으로 필터링된 시각적 개체를 보여주며, 1시간 버킷에서 가장 낮은 성능의 데이터 세트에 초점을 맞추고 있습니다. 

![필터링 된 시간별 쿼리 기간 분포 visual 데이터 집합을 수행 나타낼지를 보여 줍니다.](media/service-premium-capacity-scenarios/hourly-query-duration-distributions.png)

특정 1시간 내에 성능이 떨어지는 데이터 세트가 확인되면, Power BI 관리자는 성능 저하가 용량이 과부하되어 발생한 것인지, 또는 데이터 세트 또는 보고서를 잘못 설계하여 발생한 것인지 조사할 수 있습니다. **쿼리 대기 시간** 시각적 개체를 참조할 수 있으며 평균 쿼리 대기 시간 내림차순으로 데이터 세트를 정렬할 수 있습니다. 많은 수의 쿼리가 대기 중인 경우, 데이터 세트에 대한 높은 수요로 인해 너무 많은 쿼리 대기가 발생할 수 있습니다. 평균 쿼리 대기 시간이 상당한 경우(> 100ms), 최적화가 가능한지 데이터 세트 및 보고서를 검토할 수 있습니다. 예를 들어, 보고서 페이지가 더 적은 시각적 개체를 포함하도록 하거나 DAX 식 최적화 등을 고려할 수 있습니다.

![쿼리 대기 시간 표시 하면 성능이 낮은 데이터 집합 표시](media/service-premium-capacity-scenarios/query-wait-times.png)

데이터 세트에서의 쿼리 대기 시간 누적 증가에는 몇 가지 가능한 이유가 있습니다.

- 최적이 아닌 모델 디자인, 측정값 식 또는 보고서 디자인 - 이들은 모두 높은 수준의 CPU를 사용하는, 실행 시간이 긴 쿼리의 원인이 될 수 있습니다. 이런 상황에서는 CPU 스레드를 사용할 수 있을 때까지 새 쿼리가 대기해야 하며, 가장 바쁜 업무 시간 동안 흔히 볼 수 있는 컨보이 효과(교통 혼잡)를 생성할 수 있습니다. **쿼리 대기** 페이지는 평균 쿼리 대기 시간이 높은 데이터 세트를 결정하는 주요 리소스가 될 것입니다.
- 동일한 보고서 또는 데이터 세트를 사용하는 많은 수의 동시 용량 사용자(수백에서 수천명). 잘 설계된 데이터 세트라도 동시성 임계값을 초과하면 나쁜 성능을 보일 수 있습니다. 이는 일반적으로 다른 데이터 세트에 비해 쿼리 수에 대한 값이 아주 높게 표시되는 단일 데이터 세트로 나타납니다.(예를 들어, 한 데이터 집합에 대한 300K 쿼리는 다른 모든 데이터 세트에 대한 30K 미만의 쿼리와 비교됩니다). 이 데이터 세트에 대한 쿼리 대기는 언젠가 문제를 보이기 시작할 것이며, 이는 **쿼리 기간** 시각적 개체에서 확인할 수 있습니다.
- 많은 상이한 데이터 세트가 동시에 쿼리되어, 데이터 세트가 자주 메모리 안팎으로 순환하며 스레싱이 발생합니다. 이로 인해 데이터 세트가 메모리로 로드될 때 사용자는 성능 저하를 경험합니다. 확인하기 위해, Power BI 관리자는 메모리에 로드된 많은 수의 데이터 세트가 반복적으로 제거되고 있음을 나타내는 **시간별 데이터 세트 제거 및 메모리 소비** 시각적 개체를 참조할 수 있습니다.

## <a name="identifying-causes-for-sporadically-slow-responding-datasets"></a>산발적으로 느린 응답에 대 한 원인을 식별 데이터 집합

이 경우는 조사 보고서 시각적 개체 때때로 응답 시간이 많이 또는, 응답 하지 않을 수 있지만 다른 시간에 만족 스럽게 응답성이 뛰어난 것는 사용자가 설명 하는 경우 시작 했습니다.

앱 내에서 **쿼리 기간** 섹션에서는 다음과 같은 방식 원인 데이터 집합을 찾는 데 사용 되었습니다.

- 에 **쿼리 기간** 시각적 관리자 (최상위 데이터 집합 쿼리부터 시작) 하는 데이터 집합에서 데이터 집합을 필터링 및 교차 필터링 된 막대의 검사를 **시간별 쿼리 배포** visual 합니다.
- 단일 한 시간 가로 막대의 비율이 해당 데이터 집합에 대 한 다른 1 시간 분량 막대 및 모든 쿼리 기간 그룹에 중요 한 변경을 표시 하는 경우 (예를 들어 색 간의 비율 변경 현저 하 게), 즉,이 데이터 집합 설명 드물게 변경 성능을 제공 합니다.
- 1 시간 분량 막대는 불규칙 한 부분 성능 저하 쿼리의 보여 주는 표시는 해당 데이터 집합에 영향을 시끄러운 이웃 효과 다른 데이터 집합의 활동에 의해 발생 하는 timespan.

1 년 1 월 30 일에 아래 이미지 데이터 집합의 성능에 상당한 요즘 발생에 나타난 크기 버킷의"(3,10s]" 실행 기간입니다. 해당 1 시간 표시줄을 클릭 하면 모든 데이터 집합을 시간 동안 메모리에 로드 시끄러운 이웃 효과 발생 가능한 데이터 집합 표시 나타납니다.

![가장 낮은 성능에서 많은 부분을 보여 주는 가로 막대형](media/service-premium-capacity-scenarios/worst-performing-queries.png)

문제가 발생 하는 timespan (예를 들어 중 1 월 30 위의 이미지에서) 식별 되 면 Power BI 관리자가 모든 데이터 집합 필터를 제거 후이 시간 동안에 데이터 집합 쿼리 적극적으로 된를 확인 하는 timespan에 의해서만 필터링 수 있습니다. 시끄러운 이웃 효과 대 한 원인 데이터 집합은 일반적으로 상위 쿼리 데이터 집합 또는 가장 긴 평균 쿼리 기간을 사용 하 여 하나입니다.

데이터 집합 패턴을 데이터 집합 크기, 사용량 요구 사항 및 데이터 새로 고침 하는 경우 공유 용량 또는 다른 프리미엄 용량에서 다른 작업 영역을 통해 지원 됩니다 원인을 배포 하려면이 문제를 해결할 수 있습니다.

반대로 true 수 있습니다. Power BI 관리자는 시간 경우는 데이터 집합 쿼리 성능이 크게 향상 됩니다 하 고 내용을 사라짐 검색할 수 있습니다. 특정 정보를 해당 지점에서 누락 된 경우에 발생 시키는 문제를 가리키도록 도움이 될 수 있습니다는.

## <a name="determining-whether-there-is-enough-memory"></a>충분 한 메모리가 있는지 여부를 결정 합니다.

메모리가 부족 하 여 해당 작업을 완료 하려면 용량에 대 한 인지를 확인 하려면 Power BI 관리자를 참조할 수는 **사용 된 메모리 비율** 의 시각적 개체를 **데이터 집합** 앱의 탭. **모든** (전체) 메모리 여부에 관계 없이 이러한는 적극적으로 쿼리 처리를 메모리에 로드 하는 데이터 집합에 사용 된 메모리를 나타냅니다. **활성** 메모리 적극적으로 처리 중인 데이터 집합에 사용 된 메모리를 나타냅니다.

용량을 정상에서는 시각적 개체는이 보여 주는 모든 (합계) 사이의 간격을 같이 표시 됩니다 및 활성 메모리:

![용량을 정상는 모든 (합계) 사이의 간격을 표시 및 활성 메모리](media/service-premium-capacity-scenarios/memory-healthy-capacity.png)

메모리가 중 발생 하는 용량에서 활성 메모리 및 총 메모리 수렴 후 메모리에 추가 데이터 집합을 로드 하는 즉, 동일한 시각적 개체 표시 명확 하 게 됩니다. Power BI 관리자 클릭이 예에서 **용량 다시 시작** (에서 **고급 옵션** 관리 포털의 용량 설정 영역). 메모리에서 플러시되고 (쿼리 또는 데이터 새로 고침) 하 여 필요에 따라 메모리로 다시 로드 수 있도록 용량 결과 되 고 모든 데이터 집합에서 다시 시작 합니다.

![* * 활성 * 메모리를 사용 하 여 수렴 * * 모든 * * 메모리](media/service-premium-capacity-scenarios/memory-unhealthy-capacity.png)

## <a name="determining-whether-there-is-enough-cpu"></a>충분 한 CPU 있는지 여부를 결정 합니다.

일반적으로 용량의 평균 CPU 사용률이 80% 이하로 유지 되어야 합니다. 이 값을 초과 하는 용량에 근접 하 고 CPU 포화 의미 합니다.

CPU 포화의 효과 모든 작업을 처리 하려고 하는 대로 많은 CPU 컨텍스트 스위치를 수행 하는 용량으로 인해 말아야 보다 오래 걸리는 작업에 의해 표현 됩니다. 많은 수의 동시 쿼리를 사용 하 여 프리미엄 용량에서 높은 쿼리 대기 시간으로 표시 됩니다. 높은 쿼리 대기 시간에 따른 평소 보다 느린 응답입니다. Power BI 관리자에는 확인 하 여 CPU 포화 상태일 때 쉽게 식별할 수는 **시간별 쿼리 대기 시간 분포** visual 합니다. 정기적인 최대 쿼리 대기 시간 개수 잠재적인 CPU 채도 나타내는입니다.

![정기적인 최대 쿼리 대기 시간 잠재적인 CPU 포화를 나타낼 수](media/service-premium-capacity-scenarios/peak-query-wait-times.png)

CPU 포화에 영향을 주는 경우 백그라운드 작업에서 비슷한 패턴을 검색 때로는 수 있습니다. Power BI 관리자 (아마도 때문에 다른 지속적인 데이터 집합 새로 고침 및/또는 대화형 쿼리) 시 CPU 포화를 나타낼 수 있는 특정 데이터 집합에 대 한 새로 고침 시간에 정기적으로 급증을 찾을 수 있습니다. 이 인스턴스에서 참조 하는 **시스템** 보기 앱에서 CPU가 100%는 반드시 표시 하지 않을 수도 있습니다. 합니다 **시스템** 시간당 평균을 표시 하지만 대기 시간이 급증으로 나타납니다는 많은 작업의 몇 분 동안 CPU를 포화 될 수 있습니다.

더 미묘한 CPU 포화의 효과 보는 데 있습니다. 대기 하는 쿼리 수는 중요 하지만, 쿼리 대기 시간 항상 발생 어느 정도 수준까지 눈에 띄는 성능 저하 없이 합니다. 일부 데이터 집합 (긴 평균 쿼리 시간, 복잡성 또는 크기를 나타내는) 경우 다른 사용자 보다 CPU 포화 미치는 발생 가능성이 더 이러한 데이터 집합을 쉽게 식별 하려면 Power BI 관리자에서 막대의 색 구성에서 변경 내용을 볼 수는 **시간별 대기 시간 분포** visual 합니다. 이상 표시줄을 길게, 후이 시간 동안 쿼리 대기 해야 하는 데이터 집합에 대 한 모양 및 평균 쿼리 기간에 비해 평균 쿼리 대기 시간을 살펴볼 수도 있습니다. 두 메트릭은 동일한 크기의 데이터 집합에 대 한 쿼리 워크 로드는 trivial이 아닌 경우 데이터 집합 부족 하 여 CPU의 영향을 받는 가능성이 높습니다.

이 효과 일시적인 작업량 증가 (예를 들어, 교육 세션의 경우)에서 여러 사용자가 자주 쿼리 하는 각 버스트 하는 동안 CPU 포화에서 결과 데이터 집합 사용 되는 경우 특히 뚜렷하게 나타납니다 수 있습니다. 이 경우 다른 데이터 집합의 용량 (시끄러운 이웃 영향을 주지)에 영향을 주는 뿐만 아니라에서이 데이터 집합에서 중요 한 쿼리 대기 시간을 경험할 수 있습니다.

작음 데이터 집합 소유자가 만든 Power BI 관리자 수 요청 하는 경우에 따라 보고서 대신 (캐시 된 타일에 대 한 쿼리 데이터 집합을 사용 하 여 주기적으로 새로 고침) 대시보드를 만들면 volatile 쿼리 워크 로드. 이 대시보드를 로드할 때 급증을 방지 하기 수 있습니다. 이 솔루션 항상 못할에 대 한 비즈니스 요구 사항에 지정 된 데이터 집합에 변경 하지 않고 CPU 포화를 방지 하는 효과적인 방법 수 있지만.

## <a name="acknowledgements"></a>승인

이 문서에서 Peter Myers, 데이터 플랫폼 MVP 이며 독립 BI 전문가로 쓰여진 [비트 솔루션](https://www.bitwisesolutions.com.au/)합니다.

## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [앱을 사용 하 여 프리미엄 용량 모니터링](service-admin-premium-monitor-capacity.md)    
> [!div class="nextstepaction"]
> [관리 포털에서 용량 모니터링](service-admin-premium-monitor-portal.md)   

궁금한 점이 더 있나요? [Power BI 커뮤니티에 질문합니다.](https://community.powerbi.com/)

||||||

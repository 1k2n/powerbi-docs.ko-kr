---
title: Microsoft Power BI 프리미엄 용량 최적화
description: Power BI 프리미엄 용량에 대 한 최적화 전략을 설명합니다.
author: mgblythe
ms.author: mblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: conceptual
ms.date: 04/09/2019
ms.custom: seodec18
LocalizationGroup: Premium
ms.openlocfilehash: 06712b6bcf57ca84ec03d2c7b99b32ea61ad8c71
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/29/2019
ms.locfileid: "65565354"
---
# <a name="optimizing-premium-capacities"></a>프리미엄 용량 최적화

프리미엄 용량 성능 문제가 발생 하는 경우 최적화 하거나 적절 한 응답 시간을 복원 하려면 솔루션을 조정 하는 일반적인 첫 번째 방법이입니다. 정렬 하지 않으면 추가 프리미엄 용량을 구입 하지 않아도 되는 설명 합니다.

추가 프리미엄 용량이 필요한 경우 두 가지 방법으로이 문서에서 설명:

- 규모를 기존 프리미엄 용량
- 새 프리미엄 용량 추가

마지막으로 테스트 프리미엄 용량 크기 조정 및 접근 방법을이 문서를 종료 합니다.

## <a name="best-practices"></a>모범 사례

최상의 사용률 및 성능을 확보 하려면 때 가지 비롯 한 몇 가지 권장된 모범 사례

- 개인 작업 영역 대신 앱 작업 영역을 사용합니다.
- 다른 용량에 중요 한 비즈니스 및 셀프 서비스 BI (SSBI)를 구분 합니다.

  ![다른 용량에 중요 한 비즈니스 및 셀프 서비스 BI를 분리](media/service-premium-capacity-optimize/separate-capacities.png)

- Power BI Pro 사용자만 사용 하 여 콘텐츠를 공유, 전용된 용량에 콘텐츠를 저장 하지 않아도 있을 수 있습니다.
- 특정 새로고침 시간 등을 구현 하려는 경우 또는 특정 기능이 필요한 경우 전용된 용량을 사용 합니다. 예를 들어 큰 데이터 집합 또는 페이지를 매긴 보고 합니다.

### <a name="addressing-common-questions"></a>일반적인 질문을 주소 지정

Power BI 프리미엄 배포를 최적화 관련 워크 로드 요구 사항, 사용 가능한 리소스 및 해당 효과적으로 사용을 이해 하는 복잡 한 주제입니다.

이 문서에서는 발생 가능한 문제 및 설명 및 식별 하 고 해결 하는 방법에 대 한 정보를 설명 하는 일반적인 7 지원 질문을 합니다.

### <a name="why-is-the-capacity-slow-and-what-can-i-do"></a>느린 용량 이며 수행할 수 있는 이유는?

느린 프리미엄 용량에 기여할 수 있는 방법은 여러 가지가 있습니다. 이 질문 이란 느린에 관한 정보를 더 합니다. 보고서가 느리게 로드? 또는 로드 실패는? 보고서 시각적 개체를 로드 하거나 사용자가 보고서를 조작할 때 업데이트 느린? 새로 고쳐집니다 수행 하거나 이전에 발생 하는 보다 길어집니다?

알아보았으므로 이유에 시작할 수 있습니다 다음 조사 합니다. 다음 6 개 질문의 응답이 더 해결 하는 데 도움이 됩니다 특정 문제입니다.

### <a name="what-content-is-using-up-my-capacity"></a>콘텐츠 내 용량 사용 하는?

사용할 수는 **Power BI Premium 용량 메트릭을** 용량으로 필터링 하 고 작업 영역의 콘텐츠에 대 한 성능 메트릭을 검토할 앱. 프리미엄 용량 내에 저장 된 모든 콘텐츠에 대 한 지난 7 일에 대 한 시간별 성능 메트릭 및 리소스 사용량을 검토 하는 것이 가능 합니다. 모니터링은 종종 프리미엄 용량/성능에 대 한 일반적인 문제를 해결 하는 경우에 수행할 첫 번째 단계입니다.

주요 메트릭을 모니터링 하는 다음과 같습니다.

- 평균 CPU 및 높은 사용률 수 있습니다.
- 평균 메모리 사용률이 높은 개수 및 특정 데이터 집합, 데이터 흐름, 및 페이지가 매겨진된 보고서에 대 한 메모리 사용량입니다.
- 활성 데이터 집합은 메모리에 로드 합니다.
- 평균 및 최대 쿼리 재생 시간입니다.
- 평균 쿼리 대기 시간입니다.
- 평균 데이터 집합 및 데이터 흐름 번을 새로 고칩니다.

Power BI Premium 용량 메트릭을 앱에서 활성 메모리에는 총 마지막 3 분 내에 사용에서 되었으므로 제거할 수 없습니다 하는 보고서에 지정 된 메모리 양을 보여 줍니다. 큰 및/또는 활성 데이터 집합을 사용 하 여 높은 새로 고침 대기 시간 급증을 상관 될 수 없습니다.

합니다 **평균 기간별 상위 5 개** 상위 5 개 데이터 집합, 페이지 매긴된 보고서 및 용량 리소스를 소비 하는 데이터 흐름 차트를 강조 표시 합니다. 상위 5 개에서에서 콘텐츠 목록 조사 및 가능한 최적화 됩니다.

### <a name="why-are-reports-slow"></a>느린 보고서 이유는 무엇 인가요?

다음 표에서 발생 가능한 문제 및 식별 하 고 처리 하는 방법을 보여 줍니다.

#### <a name="insufficient-capacity-resources"></a>용량이 부족 리소스

| 가능한 설명 | 식별 하는 방법 | 해결 방법 |
| --- | --- | --- |
| 높은 총 활성 메모리 (모델 없습니다 사용 하 여 마지막 3 분 내에 있기 때문에 제거 됨).<br><br> 쿼리에서 여러 높은 급증 대기 시간입니다.<br><br> 새로 고침에 여러 개의 높은 스파이크 대기 시간입니다. | 메모리 메트릭을 모니터링할 \[ [1](#endnote-1)\], 및 제거 개수 \[ [2](#endnote-2)\]합니다. | 모델 크기를 줄이거나을 DirectQuery 모드로 변환 합니다. 참조 된 [모델 최적화](#optimizing-models) 이 문서의 섹션입니다.<br><br> 스케일 업 용량입니다.<br><br> 다른 용량에 콘텐츠를 할당 합니다. |

#### <a name="inefficient-report-designs"></a>비효율적인 보고서 디자인

| 가능한 설명 | 식별 하는 방법 | 해결 방법 |
| --- | --- | --- |
| 보고서 페이지 (시각적 개체당 하나 이상의 쿼리 트리거할 수 대화형 필터링) 하는 너무 많은 시각적 개체를 포함 합니다.<br><br> 시각적 개체는 필요한 것 보다 더 많은 데이터를 검색합니다. | 보고서 디자인을 검토 합니다.<br><br> 보고서 상호 작용 하는 방법을 이해 하는 보고서 사용자를 인터뷰 합니다.<br><br> 데이터 집합 쿼리 메트릭 모니터링 \[ [3](#endnote-3)\]합니다. | 페이지당 더 적은 시각적 개체를 사용 하 여 보고서를 디자인 합니다. |

#### <a name="dataset-is-slow-especially-when-reports-have-previously-performed-well"></a>데이터 집합은 보고서가 이전에 수행 하는 경우에 특히 느린

| 가능한 설명 | 식별 하는 방법 | 해결 방법 |
| --- | --- | --- |
| 점점 더 많은 양의 데이터 가져오기.<br><br> RLS 역할을 포함 하 여 복잡 하거나 비효율적인 계산 논리를 제공 합니다.<br><br> 완전히 액세스에 최적화 된 모델입니다.<br><br> (DQ/LC) 게이트웨이 대기 시간입니다.<br><br> 느린 DQ 원본 쿼리 응답 시간입니다. | 모델 디자인을 검토 합니다.<br><br> 게이트웨이 성능 카운터를 모니터링 합니다. | 참조 된 [모델 최적화](#optimizing-models) 이 문서의 섹션입니다. |

#### <a name="high-concurrent-report-usage"></a>높은 동시 보고서 사용

| 가능한 설명 | 식별 하는 방법 | 해결 방법 |
| --- | --- | --- |
| 높은 쿼리 대기 시간입니다.<br><br> CPU 채도입니다.<br><br> DQ/LC 연결 제한을 초과 합니다. | CPU 사용률 모니터링 \[ [4](#endnote-4)\], 쿼리 대기 시간 및 DQ/LC 사용률 \[ [5](#endnote-5) \] 메트릭 + 쿼리 기간입니다. 변동 되는 경우 경우에 동시성 문제를 나타낼 수 있습니다. | 강화 된 용량을 또는 다른 용량에 콘텐츠를 할당 합니다.<br><br> 페이지당 더 적은 시각적 개체를 사용 하 여 보고서를 디자인 합니다. |

**참고:**    
<a name="endnote-1"></a>\[1\] 평균 메모리 사용량 (GB) 및 높은 메모리 사용량 (GB)입니다.   
<a name="endnote-2"></a>\[2\] 데이터 집합에 대 한 합니다.   
<a name="endnote-3"></a>\[3\] 데이터 집합 쿼리를 데이터 집합 평균 쿼리 기간 (ms), 데이터 집합 대기 수 및 데이터 집합의 평균 대기 시간 (밀리초)입니다.   
<a name="endnote-4"></a>\[4\] 사용률이 가장 높은 (지난 7 일)의 CPU 시간과 CPU 높은 사용률 수 있습니다.   
<a name="endnote-5"></a>\[5\] DQ/LC 높은 사용률 개수 및 DQ/LC 시간 사용률이 가장 높은 (지난 7 일)입니다.   

### <a name="why-are-reports-not-loading"></a>이유는 보고서가 로드 되지 않고?

보고서 로드에 실패할 때 용량에 메모리가 부족 이며가 과도 하 게 표시 합니다. 로드 된 모든 모델 적극적으로 쿼리 되 고 있으므로 제거할 수 없습니다, 그리고 및 새로 고침 작업을 일시 중지 되었거나 지연 하는 경우 발생할 수 있습니다. Power BI 서비스는 30 초 동안 데이터 집합을 로드 하려고 하 고 사용자 잠시 후 다시 시도 하 여 오류에 정상적으로 알려 줍니다.

현재는 오류를 로드 하는 보고서에 대 한 모니터링 메트릭이 없습니다. 모니터링 시스템 메모리, 특히 높은 사용률 및 최고 사용률 시간 기준으로이 문제에 대 한 가능성을 식별할 수 있습니다. 장기 데이터 집합의 새로 고침 평균 대기 시간 및 높은 데이터 집합에 대 한이이 문제가 발생 함을 제안 수 없습니다.

매우 가끔씩만 이런 우선 순위 문제를 하지 간주 수 있습니다. 보고서 사용자는 서비스 이므로 잠시 후 다시 시도해 야 하는 내용 알림이 표시 됩니다. 이 너무 자주 경우 프리미엄 용량 확장 하 여 하거나 다른 용량에 콘텐츠를 할당 하 여 문제를 해결할 수 있습니다.

용량 관리자 (및 서비스 관리자 Power BI)를 모니터링할 수는 **Query Failures** 이런 경우를 결정 하는 메트릭. 또한 시스템 오버 로드의 경우 모든 작업을 다시 설정 하 고 용량을 다시 시작할 수 있습니다.

### <a name="why-are-refreshes-not-starting-on-schedule"></a>이유는 새로 고침 시작 되지 않는 일정에 따라?

예약 된 새로 고침 시작 시간을 보장 되지 않습니다. Power BI 서비스는 백그라운드 작업 보다 대화형 작업을 우선 항상 회수 합니다. 새로 고침은 두 조건이 충족 될 때 발생할 수 있는 백그라운드 작업:

- 충분 한 메모리가
- 프리미엄 용량에 대해 지원 되는 동시 새로 고침의 개수를 초과 하지 않습니다.

조건이 충족 되지 않는 경우 새로 고침에 조건이 편리 하 게 될 때까지 대기 중입니다.

전체 새로 고침을 회수 하는 데이터 집합의 현재 메모리 크기를 두 번 이상 필요 합니다. 충분 한 메모리를 사용할 수 없는 경우 모델 제거 메모리를 확보-하나 이상의 데이터 집합 비활성화 되 고 제거할 수 있습니다 때까지 지연 즉 되어야만 새로 고침을 시작할 수 없습니다.

지원 되는 최대 동시 새로 고침 수 1.5 배를 백 엔드 v 코어, 반올림로 설정 되어 있는지를 회수 합니다.

다음 예약 된 새로 고침을 시작으로 인해 되기 전에 시작할 수 없습니다. 예약 된 새로 고침이 수행 되지 것입니다. UI에서 수동으로 트리거되는 요청 시 새로 고침 실패 하기 전에 최대 세 번 실행 하려고 합니다.

용량 관리자 (및 서비스 관리자 Power BI)를 모니터링할 수는 **평균 새로 고침 대기 시간 (분)** 시작 작업의 예약된 된 시간 사이의 평균 지연 시간을 결정 하는 메트릭.

에 지정 된 시간에 데이터를 영향을 주는 관리는 우선 순위를 새로 고칩니다 하지 하는 동안 충분 한 메모리를 사용할 수 있는지 확인 합니다. 이 격리 알려진 리소스가 충분 한 용량을 데이터 집합을 포함할 수 있습니다. 관리자는 충돌을 최소화 하도록 예약 된 데이터 새로 고침 시간을 줄이고 또는 분산을 위해 데이터 집합 소유자를 사용 하 여 좌표가 없습니다 수 이기도 합니다. 보려면 새로 고침 큐 관리자는 또는 데이터 집합 검색을 예약 합니다.

### <a name="why-are-refreshes-slow"></a>새로 고침 느린 이유는 무엇 인가요?

새로 고침-저속 또는 이전 일반적인 질문 주소) (으로 느린 인식 수 있습니다.

새로 고침 속도가 느린 실제로 여러 이유로 인해 수 있습니다.

- 부족 한 CPU (새로 고침 CPU를 많이 수 있음).
- 메모리 부족, 새로 고침을 일시 중지 (해야 하는 조건이 recommence 낮추면 때 다시 시작 하려면 새로 고침)에 발생 합니다.
- 데이터 원본 시스템 응답성, 네트워크 대기 시간, 잘못 된 사용 권한 또는 게이트웨이 처리량을 포함 하 여 비 용량 이유.
- 데이터 볼륨-증분을 구성 하는 것이 좋습니다 새로 고침, 아래 설명과 같이 합니다.

용량 관리자 (및 서비스 관리자 Power BI)를 모니터링할 수는 **평균 새로 고침 기간 (분)** 시간이 지남에 따라 비교에 대 한 벤치 마크를 확인 하는 메트릭 및 **평균 새로 고침 대기 시간 (분)** 간의 평균 지연을 결정 하는 메트릭 평균 작업 시작과 예약된 된 시간 사이의 지연입니다.

증분 새로 고침에는 특히 큰 모델 테이블에 대 한 데이터 새로 고침 기간을 크게 줄일 수 있습니다. 증분 새로 고침을 사용 하 여 연결 하는 네 가지 혜택 가지가 있습니다.

- **새로 고침 더 빠릅니다** -테이블의 하위 집합만 필요한 로드를 줄이는 CPU 및 메모리 사용량 및 여러 파티션을 새로 고칠 때 병렬 처리를 클 수 있습니다.
- **필요한 경우에 새로 고침은 발생** -데이터가 변경 된 경우에 로드 하려면 증분 새로 고침 정책을 구성할 수 있습니다.
- **새로 고침은 됩니다 안정적** -휘발성 데이터 원본 시스템에 대 한 짧은 실행 중인 연결 가능성이 적으며 연결 끊기를 기반으로 합니다.
- **모델 유지 trim** -증분 새로 고침 정책을 자동으로 기록 슬라이딩 시간 초과 제거 하도록 구성할 수 있습니다.

자세한 내용은 참조 하세요 [Power BI 프리미엄의 증분 새로 고침](service-premium-incremental-refresh.md)합니다.

### <a name="why-are-data-refreshes-not-completing"></a>이유는 데이터를 새로 고칩니다 완료 되지?

데이터 새로 고침을 시작 하지만 완료 하지 못한 경우 몇 가지 이유로 인해 수 있습니다.

- 메모리가 부족 하거나, 프리미엄 용량에 모델 하나만 있는 경우에 즉는 모델 크기가 매우 큽니다.
- 데이터 원본 시스템 연결 끊기, 잘못 된 사용 권한 또는 게이트웨이 오류를 포함 하 여 비 용량 이유.

용량 관리자 (및 서비스 관리자 Power BI)를 모니터링할 수는 **메모리 부족으로 인해 새로 고침 오류** 메트릭.

## <a name="optimizing-models"></a>모델 최적화

최적 모델 디자인은 효율적이 고 확장 가능한 솔루션을 제공 하는 데 중요 합니다. 그러나 것이 전반적인 설명은 제공 하려면이 문서의 범위를 벗어납니다. 대신이 섹션에서는 모델을 최적화 하는 경우 고려 사항에 대 한 주요 영역을 제공 합니다.

### <a name="optimizing-power-bi-hosted-models"></a>Power BI 최적화 호스트 모델

프리미엄 용량에서 호스팅되는 모델을 최적화 하는 원본 및 모델 계층에서 수행할 수 있습니다.

가져오기 모델에 대해 최적화 가능성을 고려 하십시오.

![가져오기 모델에 대해 최적화 가능성을 파악](media/service-premium-capacity-optimize/import-model-optimizations.png)

데이터 원본 계층:

- 관계형 데이터 원본 미리 통합 된 데이터를 적절 한 인덱스를 적용, 증분 새로 고침 기간으로 일치 하는 테이블 파티션 정의 및 계산을 구체화 하 여 가능한 가장 빠른 새로 고침 되도록 최적화할 수 있습니다 (대신 계산 테이블 및 열을 모델) 또는 보기로 계산 논리를 추가 합니다.
- 관계형 저장소를 사용 하 여 비관계형 데이터 원본 미리 통합할 수 있습니다.
- 게이트웨이 가능 데이터 원본에 가까운 근접성에 충분 한 네트워크 대역폭을 사용 하 여 전용된 컴퓨터에 충분 한 리소스가 있는지 확인 하십시오.

모델 계층:

- 파워 쿼리 쿼리 디자인 최소화 하거나 복잡 한 변환 및 특히 여러 데이터 원본 (데이터 웨어하우스 이렇게 해당 추출-변환-로드 단계)를 병합 하는 제거할 수 있습니다. 또한 설정 되는 적절 한 데이터 원본 개인 정보 수준 보장을이 쿼리 전체에서 결합 된 결과 생성 하기 위해 전체 결과 로드 하려면 Power BI 요구를 방지할 수 있습니다.
- 모델 구조는 데이터 로드를 결정 하 고 모델 크기에 직접 영향을 미칩니다. 행 (특히 과거 데이터)을 제거 하는 열을 제거 하거나 (자세한 데이터를 로드 하는) 대신 요약 된 데이터를 로드 하 여 불필요 한 데이터를 로드 하지 않도록 되도록 지정할 수 있습니다. 큰 크기 감소를 저장 하지 않거나 매우 효율적으로 압축 하는 카디널리티가 높은 열 (특히 텍스트 열)을 제거 하 여 수행할 수 있습니다.
- 양방향 필터링을 허용 하는 것이 유리 아닌 단일 방향 관계를 구성 하 여 모델 쿼리 성능을 개선할 수 있습니다. 또한 사용 하는 것이 좋습니다 합니다 [CROSSFILTER](https://docs.microsoft.com/dax/crossfilter-function) 양방향 필터링 하는 대신 함수입니다.
- 모델 및 결과의 크기가 새로 고침 시간이 더 늘어납니다이 있지만 집계 테이블에서 로드 하 여 응답에는 사전 데이터를 요약 하는 빠른 쿼리를 달성할 수 있습니다. 일반적으로 매우 큰 모델 또는 복합 모델 디자인에 대 한 집계 테이블을 예약 해야 합니다.
- 계산 된 테이블 및 열 모델 크기가 증가 하 고 새로 고침 시간이 더 길어지게 됩니다. 일반적으로 저장소 크기를 줄여야 및 더 빠른 새로 고침 시간을 달성할 수 있습니다 데이터를 구체화 하거나 데이터 원본에서 계산 하는 경우. 없는 경우 파워 쿼리 사용자 지정 열을 사용 하 여 향상 된 저장소 압축을 제공할 수 있습니다.
- 측정값 및 RLS 규칙을 가장 비용이 많이 드는 수식을 방지 하려면 논리를 다시 작성에 대 한 DAX 식을 튜닝할 수 있을 수 있습니다.
- 증분 새로 고침 새로 고침 시간을 단축 하 고 메모리 및 CPU 절약 크게 수 있습니다. Trim 모델 크기를 유지 하는 기록 데이터를 제거 하려면 증분 새로 고침을 구성할 수도 있습니다.
- 충돌 하는 다른 쿼리 패턴 경우 모델 두 가지 모델로 향후 재설계 될 수 있습니다. 예를 들어, 일부 보고서를 모든 기록과 수 동안의 데이터를 있는 높은 수준의 집계 24 시간의 대기 시간을 허용 합니다. 오늘날의 데이터를 사용 하 여 우려되는 개별 트랜잭션에 세분화 된 액세스 해야 하는 다른 보고서입니다. 모든 보고서를 충족 하기 위해 단일 모델을 디자인 하는 대신 각 요구 사항에 대 한 액세스에 최적화 된 두 가지 모델을 만듭니다.

DirectQuery 모델에 대해 최적화 가능성을 고려 하십시오. 기본 데이터 원본에 쿼리 요청을 실행 하는 모델, datasource 최적화는 응답 모델 쿼리를 제공 하는 데 중요 합니다.

 ![DirectQuery 모델에 대해 최적화 가능성을 파악](media/service-premium-capacity-optimize/direct-query-model-optimizations.png)

데이터 원본 계층:

- 데이터 소스를 최적화할 수 있습니다을 보장 하기 위해 미리 데이터 통합 (이 불가능 모델 계층에서)를 적절 한 인덱스를 적용 하 여 가장 빠른 가능한 쿼리를 구체화 하는 테이블 파티션 정의 요약 된 데이터 (사용 하 여 인덱싱된 뷰) 및 계산의 양을 최소화 합니다. 최상의 환경은 통과 쿼리를 필터링 및 인덱싱된 테이블 또는 뷰 간의 내부 조인 수행 해야 하는 경우 수행 됩니다.
- 게이트웨이 가능 데이터 소스에 가까이 충분 한 네트워크 대역폭을 사용 하 여 전용된 컴퓨터에 충분 한 리소스가 있는지 확인 하십시오.

모델 계층:

- 파워 쿼리 쿼리 디자인에서 변환 하지 않고도-가급적 적용할 변환을 절대 최소 유지 하려고 합니다.
- 양방향 필터링을 허용 하는 것이 유리 아닌 단일 방향 관계를 구성 하 여 모델 쿼리 성능을 개선할 수 있습니다. 관계를 모델링을 가정 (이 경우) 하는 경우 참조 무결성이 적용 되도록 구성 해야 하는 또한 데이터 원본 쿼리를 더 효율적으로 내부 조인 (대신 outer join) 사용 하 여 발생 합니다.
- Power Query 쿼리 사용자 지정 열 또는 모델 계산된 열을 만들지 않도록-가능한 경우 데이터 원본에서 구체화 합니다.
- 측정값 및 RLS 규칙을 가장 비용이 많이 드는 수식을 방지 하려면 논리를 다시 작성에 대 한 DAX 식을 튜닝할 수 있을 수 있습니다.

복합 모델에 대해 최적화 가능성을 고려 하십시오. 복합 모델을 통해 다양 한 가져오기 및 DirectQuery 테이블 수 있음을 기억 하십시오.

![복합 모델에 대해 최적화 가능성을 파악](media/service-premium-capacity-optimize/composite-model-optimizations.png)

- 가져오기 및 DirectQuery 모델에 대 한 최적화는 일반적으로 이러한 저장소 모드를 사용 하는 복합 모델 테이블에 적용 됩니다.
- 일반적으로 노력 차원 유형 테이블 (비즈니스 엔터티를 나타냄)를 구성 하 여 분산 된 디자인을 달성 하기 위해 이중 저장소 모드 및 테이블로 팩트 유형 (종종 큰 테이블을 나타내는 운영 팩트) DirectQuery 저장소 모드입니다. 이중 저장소 모드에 모두 가져오기 및 DirectQuery 저장소 모드 및이 통과 기본 쿼리를 생성할 때 사용할 가장 효율적인 저장소 모드를 확인 하려면 Power BI 서비스를 사용 하면 의미 합니다.
- 게이트웨이 가능 데이터 원본에 가까운 근접성에 충분 한 네트워크 대역폭을 사용 하 여 전용된 컴퓨터에 충분 한 리소스가 있는지 확인
- 집계 테이블은 구성할 가져오기 저장소 모드는 DirectQuery 저장소 모드 형식 팩트 테이블을 요약 하는 데 사용 하는 경우 큰 쿼리 성능 향상을 제공할 수 있습니다. 이 경우 집계 테이블은 모델의 크기를 늘리고 새로 고침 시간 및 쿼리 속도 향상 감수할 인 경우가 많습니다.

### <a name="optimizing-externally-hosted-models"></a>호스트 된 모델을 외부에서 최적화

에 설명 된 많은 최적화 가능성을 파악 합니다 [Power BI 최적화 호스트 모델](#optimizing-power-bi-hosted-models) 섹션에서는 Azure Analysis Services 및 SQL Server Analysis Services를 사용 하 여 개발 하는 모델에도 적용 합니다. 일반 예외는 현재 지원 되지 않는, 복합 모델 및 집계 테이블을 포함 하 여 특정 기능입니다.

데이터 집합 외부에서 호스팅에 대 한 추가 고려 사항이 Power BI 서비스와 관련 하 여 호스팅 데이터베이스입니다. Azure Analysis Services, Power BI 테 넌 트 (홈 영역)와 동일한 지역에서 Azure 리소스를 만드는 의미 합니다. IaaS에 대 한 SQL Server Analysis Services에 대 한 즉, 동일한 지역의 VM을 호스트 하 고 온-프레미스에 대 한 효율적인 게이트웨이 설치를 확인 의미 합니다.

이야기 하는 Azure Analysis Services 데이터베이스 및 SQL Server Analysis Services 테이블 형식 데이터베이스에 모델 메모리에 완전히 로드 해야 하며 쿼리를 지원 하기 위해 항상 상태로 남아 있는 전혀 관심 수 있습니다. Power BI 서비스와 마찬가지로 있어야 모델을 새로 고치는 동안 온라인 유지 해야 하는 경우 새로 고침에 대 한 충분 한 메모리입니다. Power BI 서비스와 달리 모델은 사용량에 따라 메모리를 드나드는 자동으로 오래 된 개념은 있습니다. 따라서 power BI 프리미엄을 낮은 메모리 사용량을 사용 하 여 모델 쿼리를 최대화 하기 위해 보다 효율적인 방법은 제공 합니다.

## <a name="capacity-planning"></a>용량 계획

프리미엄 용량 크기는 사용 가능한 메모리와 프로세서 리소스 그리고 용량에 부과되는 제한을 결정합니다. 여러 개의 프리미엄 용량을 만들면 용량 워크로드를 서로 격리시키는데 도움이 되므로 프리미엄 용량 수도 고려 사항입니다. 저장소는 용량 노드당 100TB 이며 이는 모든 워크로드에 충분할 가능성이 크다는 점에 유의합니다.

특히 사용자가 생성한 초기 용량에 대해서는 프리미엄 용량의 수와 크기를 결정하는 것은 어려울 수 있습니다. 용량 크기 조정의 첫 번째 단계는 예상된 일상 사용량을 나타내는 평균 워크로드를 이해하는 것입니다. 모든 워크로드가 동일하지 않다는 것을 이해하는 것이 중요합니다. 예를 들어-스펙트럼의 한쪽 끝에서 단일 시각적 개체를 포함하는 단일 보고서 페이지에 액세스 하는 100명의 동시 사용자는 쉽게 달성할 수 있습니다. 그러나-스펙트럼의 다른 쪽 끝에서 100명의 동시 사용자들이 보고서 페이지에 각각 100개의 시각적 개체를 가지고 100 개의 다른 보고서에 액세스하는 것은 용량 리소스의 매우 다른 요구를 할 것니다.

용량 관리자는 환경, 콘텐츠 및 예상되는 사용량에 대한 많은 요소를 고려해야 합니다. 최우선 목표는 일관된 쿼리 시간, 허용 가능한 대기 시간 및 제거 비율을 제공하는 동안 용량 사용률을 극대화 하는 것입니다. 고려사항에 대한 요소는 다음을 포함할 수 있습니다.

- **모델 크기와 데이터 특성** -가져오기 모델은 새로 고침 또는 쿼리를 허용하기 위해 메모리에 완전히 로드해야 합니다. LC/DQ 데이터 세트는 복잡한 측정값 또는 RLS 규칙을 평가하기 위해 상당한 프로세서 시간 및 상당한 메모리가 필요할 수 있습니다. 메모리 및 프로세서 크기와 LC/DQ 쿼리 처리량은 용량 크기에 따라 제한됩니다.
- **동시 활성 모델** -서로 다른 가져오기 모델의 동시 쿼리는 메모리에 남아 있는 경우 가장 높은 응답성 및 성능을 제공할 것입니다. 모든 자주 쿼리되는 모델을 호스트하기 위한 충분한 메모리가 있어야 하며, 새고 고칠수 있도록 추가 메모리가 있어야 합니다.
- **가져오기 모델 새로 고침** -새로 고침 유형 (전체 또는 증분), 기간 및 Power Query 쿼리의 복잡도, 계산된 테이블/열 논리는 메모리와 특히 프로세서 사용량에 영향을 줄 수 있습니다. 용량 크기 (1.5 x backend v 코어, 반올림)에 따라 동시 새로 고침이 제한됩니다.
- **동시 쿼리** -프로세서나 LC/DQ 연결 용량 한도를 초과하는 경우 많은 동시 쿼리가 응답하지 않는 보고서를 발생할 수 있습니다. 특히 여러 시각적 개체를 포함하는 보고서 페이지에 대한 경우가 그렇습니다.
- **데이터 흐름과 페이지를 매긴 보고서** -용량 메모리의 구성 가능한 최대 비율을 각각 요구하는 데이터 흐름 및 페이지를 매긴 보고서를 지원하도록 용량을 구성할 수 있습니다. 메모리가 데이터 흐름에는 동적으로 할당되지만, 페이지를 매긴 보고서에는 정적으로 할당됩니다.

이러한 요소 외에도 용량 관리자는 여러 가지 용량을 만드는 것을 고려할 수 있습니다. 여러 용량은 워크로드를 격리할 수 있으며 우선 순위가 높은 워크로드에 리소스가 보장되도록 구성할 수 있습니다. 예를 들어, 셀프 서비스 BI (SSBI) 워크로드에서 비즈니스에 중요한 워크로드를 구분하기 위해 두 개의 용량을 만들 수 있습니다. 비즈니스에 중요한 용량은 대규모 회사 모델을 격리하여 보장된 리소스를 제공하며, IT 부서에만 액세스 권한을 부여할 수 있습니다. SSBI 용량은 점점 더 많은 수의 소규모 모델을 호스트하는데 사용할 수 있으며, 비즈니스 분석가에게 액세스 권한을 부여할 수 있습니다. SSBI 용량은 때때로 허용 가능한 쿼리 또는 새로 고침 대기 시간을 경험할 수 있습니다.

시간이 지남에 따라, 용량 관리자는 작업 영역 간 콘텐츠 이동 또는 용량 간 작업 영역 이동과 용량의 규모를 확장 또는 강화를 통해 용량 간 작업 영역 균형을 조정할 수 있습니다. 일반적으로 더 큰 모델을 호스트하기 위해 규모을 강화하고 더 높은 동시성을 위해 규모를 확장할 수 있습니다.

라이선스를 구입하는 것은 v 코어를 사용하여 테넌트를 제공 한다는 사실을 기억하십시오. **P3** 구독 구매는 하나 또는 최대 4 개의 프리미엄 용량을 생성하는데 사용할 수 있습니다(예, 1 x P3 또는 2 x P2 또는 4 x P1). 또한, P2 용량을 P3 용량으로 업그레이드 하기 전에 v 코어를 분할하여 두 개의 P1 용량을 생성할 수 있습니다.

## <a name="testing-approaches"></a>테스트 방법

용량 크기가 결정되면 통제된 환경을 만들어 테스트를 수행할 수 있습니다. P1 용량이 A4 용량과 동일하며 P2 및 P3 용량이 각각 A5 및 A6 용량과 동일하다는 점에 유의하여 Azure(A Sku) 용량을 만드는 것이 실용적이고 경제적인 옵션입니다. Azure 용량은 신속하게 만들 수 있으며 시간 단위로 요금이 청구 됩니다. 따라서 테스트가 완료되면 비용 발생을 중지하기 위해 쉽게 삭제할 수 있습니다.

테스트 콘텐츠는 Azure 용량에 만든 작업 영역에 추가할 수 있으며 단일 사용자로 보고서를 실행하여 현실적이고 대표적인 쿼리의 워크로드를 생성할 수 있습니다. 가져오기 모델의 경우, 각 모델에 대한 새로 고침도 수행 되어야 합니다. 리소스 사용률을 이해 하는 모든 메트릭을 검토하기 위해 모니터링 도구를  사용할 수 있습니다.

테스트를 반복하는 것이 중요합니다. 테스트는 여러 번 실행해야 하고 매번 거의 동일한 결과를 제공 해야 합니다. 이러한 결과의 평균은 실제 프로덕션 환경에서 워크로드를 예측하고 추론하는데 사용될 수 있습니다.

스트레스 테스트를 생성하려면, 실제 작업을 시뮬레이션 하기 위해 부하 테스트 응용 프로그램을 개발 하는 것이 좋습니다. 이 작업을 수행하는 방법의 세부 내용은 이 문서의 범위를 벗어납니다. 코드 샘플을 포함한 자세한 내용은, [Visual Studio 부하 테스트를 사용하여 Power BI에 대한 응용 프로그램 부하 테스트](https://blogs.msdn.microsoft.com/charles_sterling/2018/04/04/webinar-load-testing-power-bi-applications-with-visual-studio-load-test/) 웹 세미나를 참조합니다.

## <a name="acknowledgements"></a>승인

이 문서에서 Peter Myers, 데이터 플랫폼 MVP 이며 독립 BI 전문가로 쓰여진 [비트 솔루션](https://www.bitwisesolutions.com.au/)합니다.

## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [프리미엄 용량 시나리오](service-premium-capacity-scenarios.md)   
  
궁금한 점이 더 있나요? [Power BI 커뮤니티에 질문합니다.](https://community.powerbi.com/)

||||||

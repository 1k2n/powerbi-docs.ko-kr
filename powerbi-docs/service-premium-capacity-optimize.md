---
title: Microsoft Power BI 프리미엄 용량 최적화
description: Power BI 프리미엄 용량에 대한 최적화 전략을 설명합니다.
author: mgblythe
ms.author: mblythe
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: conceptual
ms.date: 04/09/2019
ms.custom: seodec18
LocalizationGroup: Premium
ms.openlocfilehash: 06712b6bcf57ca84ec03d2c7b99b32ea61ad8c71
ms.sourcegitcommit: 60dad5aa0d85db790553e537bf8ac34ee3289ba3
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/29/2019
ms.locfileid: "65565354"
---
# <a name="optimizing-premium-capacities"></a>프리미엄 용량 최적화

프리미엄 용량 성능 문제가 발생하는 경우, 일반적인 첫 번째 접근법은 적절한 응답 시간을 복원하기 위해 솔루션을 최적화하거나 조정하는 것입니다. 특별한 이유가 없으면 추가 프리미엄 용량을 구입하지 않아도 됩니다.

이 문서에서는 추가 프리미엄 용량이 필요한 경우의 두 가지 방법을 설명합니다.

- 기존 프리미엄 용량 수직 확장
- 새 프리미엄 용량 추가

마지막으로, 접근법 테스트와 프리미엄 용량 크기 조정으로 이 문서를 종료합니다.

## <a name="best-practices"></a>모범 사례

최상의 사용률 및 성능을 확보하려는 경우, 다음과 같은 몇 가지 권장 모범 사례가 있습니다.

- 개인 작업 영역 대신 앱 작업 영역을 사용합니다.
- 중요한 비즈니스 및 셀프 서비스 BI(SSBI)를 서로 다른 용량으로 분리합니다.

  ![다른 용량에 중요 한 비즈니스 및 셀프 서비스 BI를 분리](media/service-premium-capacity-optimize/separate-capacities.png)

- Power BI Pro 사용자와만 콘텐츠를 공유하려고 한다면, 전용 용량에 콘텐츠를 저장할 필요가 없을 수 있습니다.
- 특정 새로 고침 시간을 구현하려는 경우 또는 특정 기능이 필요한 경우 전용 용량을 사용합니다. 예를 들어 큰 데이터 집합 또는 페이지를 매긴 보고서를 사용하는 경우입니다.

### <a name="addressing-common-questions"></a>일반적인 질문 해결

Power BI 프리미엄 배포 최적화는 워크로드 요구 사항, 사용 가능한 리소스 및 이의 효과적인 사용에 대한 이해가 수반되는 복잡한 주제입니다.

이 문서에서는 발생 가능한 문제, 이에 대한 설명 및 이를 식별하고 해결하는 방법에 대한 정보를 설명하는 7가지 일반 지원 질문을 다룹니다.

### <a name="why-is-the-capacity-slow-and-what-can-i-do"></a>용량이 느린 이유는 무엇이며, 무엇을 할 수 있습니까?

느린 프리미엄 용량의 이유는 여러 가지가 있습니다. 느리다는 것의 뜻을 이해하기 위해서는 추가 정보가 필요합니다. 보고서가 느리게 로드되는지? 또는 로드 실패인지? 보고서의 시각적 개체 로딩이 느리거나 사용자가 보고서를 조작할 때 업데이트가 느린 것인지? 이전보다 또는 기대한 것보다 새로 고침하는 데 오래 걸리는지?

그 이유를 이해하게 되면, 조사를 시작할 수 있습니다. 다음 6개 질문에 대한 응답이 좀 더 구체적인 문제를 해결하는 데 도움을 줄 것입니다.

### <a name="what-content-is-using-up-my-capacity"></a>어떤 콘텐츠가 내 용량을 사용하는가?

용량으로 필터링하고 작업 영역의 콘텐츠에 대한 성능 메트릭을 검토할 수 있는 **Power BI Premium 용량 메트릭** 앱을 사용할 수 있습니다. 프리미엄 용량 내에 저장된 모든 콘텐츠에 대한 지난 7일 동안의 시간별 성능 메트릭 및 리소스 사용량을 검토하는 것이 가능합니다. 모니터링은 종종 프리미엄 용량 성능에 대한 일반적인 문제를 해결하는 경우에 수행할 첫 번째 단계입니다.

다음과 같은 주요 메트릭을 모니터링합니다.

- 평균 CPU 및 높은 사용률의 횟수
- 평균 메모리 및 높은 사용률의 횟수 그리고 특정 데이터 집합, 데이터 흐름 및 페이지를 매긴 보고서에 대한 메모리 사용량
- 메모리에 로드된 활성 데이터 세트
- 평균 및 최대 쿼리 시간
- 평균 쿼리 대기 시간
- 평균 데이터 세트 및 데이터 흐름 새로 고침 시간

Power BI Premium 용량 메트릭 앱에서 활성 메모리는 최근 3분 내에 사용되었으므로 제거할 수 없는, 보고서에 할당된 총 메모리의 양을 보여 줍니다. 새로 고침 대기 시간이 크게 상승하는 경우, 큰 데이터 세트 및 활성 데이터 세트와 상관 관계가 있을 수 있습니다.

**평균 시간 상위 5개** 차트는 용량 리소스를 소비하는 상위 5개 데이터 세트, 페이지를 매긴 보고서 및 데이터 흐름을 강조 표시합니다. 상위 5개 목록의 콘텐츠는 조사 및 최적화의 후보가 됩니다.

### <a name="why-are-reports-slow"></a>보고서가 느린 이유는 무엇인가요?

다음 표에서는 발생 가능한 문제 및 문제를 식별하고 처리하는 방법을 보여 줍니다.

#### <a name="insufficient-capacity-resources"></a>용량 리소스 부족

| 가능한 설명 | 식별 하는 방법 | 해결 방법 |
| --- | --- | --- |
| 높은 총 활성 메모리(최근 3분 내에 사용 중이었기 때문에 모델을 제거할 수 없습니다).<br><br> 쿼리 대기 시간이 여러 번 급증했습니다.<br><br> 새로 고침 대기 시간이 여러 번 급증했습니다. | 메모리 메트릭 \[ [1](#endnote-1)\]과 제거 횟수 \[ [2](#endnote-2)\]를 모니터링합니다. | 모델 크기를 줄이거나 DirectQuery 모드로 전환합니다. 이 문서의 [모델 최적화](#optimizing-models) 섹션을 참조합니다.<br><br> 용량을 수직 확장합니다.<br><br> 다른 용량에 해당 콘텐츠를 할당합니다. |

#### <a name="inefficient-report-designs"></a>비효율적인 보고서 디자인

| 가능한 설명 | 식별 하는 방법 | 해결 방법 |
| --- | --- | --- |
| 보고서 페이지가 너무 많은 시각적 개체를 포함합니다(대화형 필터링은 시각적 개체당 최소 하나의 쿼리를 트리거할 수 있습니다).<br><br> 시각적 개체가 필요한 것보다 더 많은 데이터를 검색합니다. | 보고서 디자인을 검토합니다.<br><br> 보고서와 상호 작용하는 방식을 알아보기 위해 보고서 사용자를 인터뷰합니다.<br><br> 데이터 세트 쿼리 메트릭을 모니터링합니다. \[ [3](#endnote-3)\]. | 페이지당 더 적은 시각적 개체를 사용하여 보고서를 디자인합니다. |

#### <a name="dataset-is-slow-especially-when-reports-have-previously-performed-well"></a>특히 이전에 보고서 성능이 좋았으나, 현재 데이터 세트가 느림

| 가능한 설명 | 식별 하는 방법 | 해결 방법 |
| --- | --- | --- |
| 가져오기 데이터의 양이 점점 증가.<br><br> RLS 역할을 포함하여 복잡하거나 비효율적인 계산 논리.<br><br> 완전히 최적화되지 않은 모델.<br><br> (DQ/LC) 게이트웨이 대기 시간.<br><br> 느린 DQ 원본 쿼리 응답 시간. | 모델 디자인을 검토합니다.<br><br> 게이트웨이 성능 카운터를 모니터링합니다. | 이 문서의 [모델 최적화](#optimizing-models) 섹션을 참조합니다. |

#### <a name="high-concurrent-report-usage"></a>높은 동시 보고서 사용

| 가능한 설명 | 식별 하는 방법 | 해결 방법 |
| --- | --- | --- |
| 높은 쿼리 대기 시간.<br><br> CPU 포화.<br><br> DQ/LC 연결 제한 초과. | CPU 사용률 \[ [4](#endnote-4)\], 쿼리 대기 시간 및 DQ/LC 사용률 \[ [5](#endnote-5) \] 메트릭 + 쿼리 시간을 모니터링합니다. 변동이 많은 경우 동시성 문제일 수 있습니다. | 용량을 수직 확장하거나 다른 용량에 해당 콘텐츠를 할당합니다.<br><br> 페이지당 더 적은 시각적 개체를 사용하여 보고서를 디자인합니다. |

**참고:**    
<a name="endnote-1"></a>\[1\] 평균 메모리 사용량 (GB) 및 높은 메모리 사용량 (GB)입니다.   
<a name="endnote-2"></a>\[2\] 데이터 세트 제거입니다.   
<a name="endnote-3"></a>\[3\] 데이터 세트 쿼리, 데이터 세트 평균 쿼리 시간(밀리초), 데이터 세트 대기 횟수 및 데이터 세트의 평균 대기 시간(밀리초)입니다.   
<a name="endnote-4"></a>\[4\] 높은 CPU 사용률 횟수와 가장 높은 사용률의 CPU 시간입니다(지난 7일).   
<a name="endnote-5"></a>\[5\] DQ/LC 높은 사용률 횟수 및 가장 높은 사용률의 DQ/LC 시간입니다(지난 7 일).   

### <a name="why-are-reports-not-loading"></a>왜 보고서가 로드되지 않나요?

보고서 로드에 실패할 때, 용량에 메모리가 부족하며 과열된 것이 확실합니다. 로드된 모든 모델이 적극적으로 쿼리되고 있으므로 제거할 수 없고 어떤 새로 고침 작업이 일시 중지되었거나 지연되는 경우 발생할 수 있습니다. Power BI 서비스는 30초 동안 데이터 세트를 로드하려고 시도하고 사용자가 잠시 후 다시 시도할 것을 제안하며 오류를 알려 줍니다.

현재는 보고서 로딩 오류에 대한 모니터링 메트릭이 없습니다. 시스템 메모리, 특히 높은 사용률 및 최고 사용률 시간을 모니터링하여 이 문제에 대한 가능성을 식별할 수 있습니다. 데이터 세트의 새로 고침 평균 대기 시간이 길고 데이터 세트 제거가 많은 것은 이 문제가 발생하고 있음을 시사할 수 있습니다.

매우 가끔씩만 발생하는 경우, 우선 순위 문제로 고려하지 않을 수 있습니다. 보고서 사용자는 서비스가 사용 중이므로 잠시 후 다시 시도하라는 내용의 알림을 받게 됩니다. 이 문제가 너무 자주 발생하는 경우, 프리미엄 용량을 수직 확장하거나 다른 용량에 콘텐츠를 할당하여 해결할 수 있습니다.

용량 관리자(그리고 Power BI서비스 관리자)는 이의 발생을 판별하기 위해 **Query Failures** 메트릭을 모니터링할 수 있습니다. 또한 시스템 오버로드의 경우 모든 작업을 다시 설정하고 용량을 다시 시작할 수 있습니다.

### <a name="why-are-refreshes-not-starting-on-schedule"></a>새로 고침이 일정에 따라 시작되지 않는 이유는 무엇인가요?

예약된 새로 고침 시작 시간은 보장되지 않습니다. Power BI 서비스는 백그라운드 작업보다 대화형 작업을 항상 우선시한다는 점을 상기하세요. 새로 고침은 다음 두 조건이 충족될 때 발생할 수 있는 백그라운드 작업입니다.

- 충분한 메모리
- 프리미엄 용량에 대해 지원되는 동시 새로 고침의 개수를 초과하지 않습니다.

조건이 충족되지 않는 경우 새로 고침은 조건이 좋아질 때까지 대기합니다.

전체 새로 고침의 경우, 현재 데이터 집합 메모리 크기의 최소 두 배 이상이 필요하다는 점을 상기하세요. 충분한 메모리를 사용할 수 없는 경우, 모델 제거로 메모리를 확보할 때까지 새로 고침은 시작할 수 없습니다. 즉 하나 이상의 데이터 집합이 비활성화되고 제거될 때까지 지연됩니다.

지원되는 최대 동시 새로 고침 수는 백 엔드 v 코어의 1.5배 값의 반올림으로 설정되어 있다는 것을 기억하세요.

다음 예약된 새로 고침이 시작되기 전에 예약된 새로 고침을 시작할 수 없는 경우 해당 새로 고침은 실패합니다. UI에서 수동으로 트리거되는 요청 시 새로 고침은 실패하기 전에 최대 세 번까지 실행을 시도합니다.

용량 관리자(그리고 Power BI 서비스 관리자)는 예약된 시간과 작업 시작 사이의 평균 지연을 확인하기 위해 **평균 새로 고침 대기 시간(분)** 메트릭을 모니터링할 수 있습니다.

일반적으로 관리 우선 순위는 아니지만, 정시 데이터 새로 고침에 영향을 미치기 위해서는 충분한 메모리가 있는지 확인합니다. 이는 리소스가 충분한 것으로 알려진 용량으로 데이터 세트를 격리하는 것을 포함할 수 있습니다. 또한 관리자가 충돌을 최소화하도록 예약된 데이터 새로 고침 시간을 줄이거나 분산을 위해 데이터 집합 소유자와 협력하는 것도 가능합니다. 관리자는 새로 고침 대기열을 보거나 데이터 세트 예약을 검색할 수 없다는 점을 유의하세요.

### <a name="why-are-refreshes-slow"></a>새로 고침이 느린 이유는 무엇인가요?

새로 고침은 느릴 수 있습니다 - 또는 느리다고 인식될 수 있습니다(이전의 일반적인 질문에서 다룸).

새로 고침 속도가 실제로 느린 경우, 몇 가지 이유가 있을 수 있습니다.

- CPU 부족(새로 고침은 매우 CPU 집약적일 수 있음).
- 메모리 부족으로 인한 새로 고침 일시 중지(다시 시작하기 위한 유리한 조건일 때 새로 고침 작업을 다시 시작해야 함).
- 데이터 원본 시스템 응답성, 네트워크 대기 시간, 잘못된 사용 권한 또는 게이트웨이 처리량을 포함하는 비용량 이유.
- 데이터 볼륨 - 아래 설명과 같이 증분 새로 고침을 구성하기 위한 좋은 이유.

용량 관리자(그리고 Power BI 서비스 관리자)는 시간이 지남에 따라 비교를 위한 벤치 마크를 확인하기 위해 **평균 새로 고침 기간(분)** 메트릭을, 예약된 시간과 작업 시작 사이의 평균 지연을 확인하기 위해 **평균 새로 고침 대기 시간 (분)** 메트릭을 모니터링할 수 있습니다.

증분 새로 고침은 특히 큰 모델 테이블에 대한 데이터 새로 고침 기간을 크게 줄일 수 있습니다. 증분 새로 고침과 관련된 네 가지 혜택이 있습니다.

- **더 빠른 새로 고침** - 테이블의 하위 집합만 로딩하면 되므로 CPU 및 메모리 사용량이 감소되고 여러 파티션을 새로 고칠 때 병렬이 더 높아질 수 있습니다.
- **필요한 경우에만 새로 고침이 발생** - 데이터가 변경된 경우에만 로드하도록 증분 새로 고침 정책을 구성할 수 있습니다.
- **더 안정적인 새로 고침** - 휘발성 데이터 원본 시스템에 대한 연결 실행이 짧으므로 연결이 쉽게 끊어지지 않습니다.
- **모델 잘라내기 유지** - 증분 새로 고침 정책은 특정 기간의 시간을 넘어가는 기록 데이터를 자동으로 제거하도록 구성할 수 있습니다.

자세한 내용은 [Power BI 프리미엄의 증분 새로 고침](service-premium-incremental-refresh.md)을 참조합니다.

### <a name="why-are-data-refreshes-not-completing"></a>데이터 새로 고침이 완료되지 않는 이유는 무엇인가요?

데이터 새로 고침을 시작하지만 완료하지 못하는 경우, 몇 가지 이유가 있을 수 있습니다.

- 메모리 부족, 프리미엄 용량에 모델이 하나만 있지만 모델 크기가 매우 큽니다.
- 데이터 원본 시스템 연결 끊김, 잘못된 사용 권한 또는 게이트웨이 오류를 포함하는 용량 이외의 이유.

용량 관리자(그리고 Power BI 서비스 관리자)는 **메모리 부족으로 인한 새로 고침 오류** 메트릭을 모니터링할 수 있습니다.

## <a name="optimizing-models"></a>모델 최적화

최적 모델 디자인은 효율적이고 확장 가능한 솔루션을 제공하는 데 있어 중요합니다. 그러나 전체 설명을 제공하는 것은 이 문서의 범위를 벗어납니다. 대신 이 섹션에서는 모델을 최적화하는 경우의 고려 사항에 대한 주요 영역을 제공합니다.

### <a name="optimizing-power-bi-hosted-models"></a>Power BI 호스트 모델 최적화

프리미엄 용량에서 호스팅되는 모델 최적화는 데이터 원본 및 모델 계층에서 수행할 수 있습니다.

가져오기 모델에 대해 최적화 가능성을 고려 하십시오.

![가져오기 모델에 대해 최적화 가능성을 파악](media/service-premium-capacity-optimize/import-model-optimizations.png)

데이터 원본 계층:

- 관계형 데이터 원본은 미리 데이터를 통합하고, 적절한 인덱스를 적용하고, 증분 새로 고침 기간에 일치하는 테이블 파티션을 정의하고, 계산을 실체화하거나(계산된 모델 테이블과 열 대신)  뷰에 계산 논리를 추가하여 가능한 가장 빠른 새로 고침을 보장하도록 최적화할 수 있습니다.
- 관계형 저장소를 사용하여 비관계형 데이터 원본을 미리 통합할 수 있습니다.
- 게이트웨이는 충분한 네트워크 대역폭을 사용하고 데이터 원본에 근접해야 하며, 가능하면 전용 컴퓨터에 충분한 리소스가 있도록 해야 합니다.

모델 계층:

- 파워 쿼리 쿼리 디자인은 복잡한 변환을 최소화하거나 제거할 수 있으며 특히 여러 데이터 원본을 병합할 수 있습니다(데이터 웨어하우스는 Extract-Transform-Load 단계에서 이를 달성함). 또한 적절한 데이터 원본 개인 정보 보안 수준이 설정되도록 하면, 쿼리 간에 결합된 결과를 생성하기 위해 Power BI가 전체 결과를 로드하지 않아도 됩니다.
- 모델 구조는 로드할 데이터를 결정하고 모델 크기에 직접 영향을 미칩니다. 열을 제거하고, 행(특히 과거 데이터)을 제거하거나 요약된 데이터(자세한 데이터를 로드하는 대신)를 로드하여 불필요한 데이터를 로드하지 않도록 지정할 수 있습니다. 카디널리티가 높은 열(특히 텍스트 열)을 제거하여 저장을 하지 않거나 매우 효율적으로 압축하여 크기를 크게 감소시킬 수 있습니다.
- 양방향 필터링을 허용해야 하는 확실한 이유가 없는 한 단일 방향 관계를 구성하여 모델 쿼리 성능을 개선할 수 있습니다. 양방향 필터링 대신  [CROSSFILTER](https://docs.microsoft.com/dax/crossfilter-function) 함수를 사용하는 것도 고려할 수 있습니다.
- 집계 테이블은 사전에 요약된 데이터를 로드하여 빠른 쿼리 응답을 달성할 수 있지만 모델 크기가 증가하고 새로 고침 시간이 늘어납니다. 일반적으로 집계 테이블은 매우 큰 모델 또는 복합 모델 디자인을 위해 사용됩니다.
- 계산된 테이블 및 열은 모델 크기를 증가시키고 새로 고침 시간이 더 길어지게 합니다. 일반적으로 데이터를 구체화하거나 데이터 원본에서 계산되는 경우 저장소 크기가 줄고 더 빠른 새로 고침 시간을 달성할 수 있습니다. 가능하지 않는 경우, 파워 쿼리 사용자 지정 열을 사용하여 향상된 저장소 압축을 제공할 수 있습니다.
- 가장 비용이 많이 드는 수식을 방지하기 위해 논리를 다시 작성하여, 측정값 및 RLS 규칙에 대한 DAX 식을 튜닝하는 것이 가능할 수 있습니다.
- 증분 새로 고침은 크게 새로 고침 시간을 단축하고 메모리 및 CPU 절약할 수 있습니다. 기록 데이터를 제거하여 모델 크기를 축소하도록 증분 새로 고침을 구성할 수도 있습니다.
- 모델은 쿼리 패턴이 충돌하고 다른 경우 두 개의 모델로 재설계될 수 있습니다. 예를 들어, 일부 보고서는 모든 기록에 대한 높은 수준의 집계를 표시하며 24시간의 대기 시간을 허용합니다. 다른 보고서는 오늘의 데이터와 관련되며 개별 트랜잭션에 대한 세분화된 액세스를 필요로 합니다. 모든 보고서를 충족하는 단일 모델을 디자인하는 대신 각 요구 사항에 대해 최적화된 두 개의 모델을 만듭니다.

DirectQuery 모델에 대해 최적화 가능성을 고려하세요. 모델이 기본 데이터 원본에 쿼리 요청을 보내므로, 데이터 원본 최적화는 응답성이 높은 모델 쿼리를 제공하는 데 있어 중요합니다.

 ![DirectQuery 모델에 대해 최적화 가능성을 파악](media/service-premium-capacity-optimize/direct-query-model-optimizations.png)

데이터 원본 계층:

- 데이터 원본을 최적화하여 미리 데이터를 통합하고(모델 계층에서는 불가능), 적절한 인덱스를 적용하고, 테이블 파티션을 정의하고, 요약된 데이터 를 구체화하고(인덱싱된 뷰 사용), 계산의 양을 최소화하여 가능한 한 가장 빠른 쿼리를 보장할 수 있습니다. 최상의 환경은 통과 쿼리가 필터링과 인덱싱된 테이블 또는 뷰 간의 내부 조인만 수행하는 경우 달성됩니다.
- 게이트웨이는 충분한 리소스가 있도록 하고 데이터 원본에 근접하고 충분한 네트워크 대역폭을 사용하며, 되도록 전용 컴퓨터를 사용하세요.

모델 계층:

- 파워 쿼리 쿼리 디자인은 가급적 변환을 적용하지 않아야 합니다. 또는 변환을 최소로 유지하도록 합니다.
- 양방향 필터링을 허용해야 하는 확실한 이유가 없는 한 단일 방향 관계를 구성하여 모델 쿼리 성능을 개선할 수 있습니다. 또한 모델 관계는 참조 무결성이 강제된다고(해당하는 경우) 가정하도록 구성하여, 데이터 원본 쿼리가 보다 효율적인 내부 조인(외부 조인 대신)을 사용하도록 해야 합니다.
- Power Query 쿼리 사용자 지정 열 또는 모델 계산된 열을 만들지 않도록 합니다 -가능한 경우 데이터 원본에서 구체화합니다.
- 가장 비용이 많이 드는 수식을 방지하기 위해 논리를 다시 작성하여, 측정값 및 RLS 규칙에 대한 DAX 식을 튜닝하는 것이 가능할 수 있습니다.

복합 모델에 대해 최적화 가능성을 고려하세요. 복합 모델을 통해 가져오기 및 DirectQuery 테이블을 혼합할 수 있음을 기억하세요.

![복합 모델에 대해 최적화 가능성을 파악](media/service-premium-capacity-optimize/composite-model-optimizations.png)

- 일반적으로 가져오기 및 DirectQuery 모델에 대한 최적화는 이러한 저장소 모드를 사용하는 복합 모델 테이블에 적용됩니다.
- 일반적으로 이중 저장소 모드로 차원 유형 테이블(비즈니스 엔터티를 나타냄)을, DirectQuery 저장소 모드로 팩트 유형 테이블(종종 운영 팩트를 나타내는 큰 테이블)을 구성하여 균형 잡힌 디자인을 달성하기 위해 노력합니다. 이중 저장소 모드는 가져오기 및 DirectQuery 저장소 모드를 의미하고 이를 통해 Power BI 서비스는 통과 기본 쿼리를 생성할 때 사용할 가장 효율적인 저장소 모드를 결정할 수 있습니다.
- 게이트웨이는 데이터 원본에 근접하며 충분한 네트워크 대역폭을 사용하며 가급적 전용 컴퓨터에서 충분한 리소스가 있는지 확인합니다.
- 가져오기 저장소 모드로 구성된 집계 테이블은 DirectQuery 저장소 모드 팩트 형식 테이블을 요약하는 데 사용될 때 극적인 쿼리 성능 향상 기능을 제공합니다. 이 경우 집계 테이블은 모델의 크기를 늘리고 새로 고침 시간을 길게 하는 경우가 많은데, 이는 더 빠른 쿼리를 위해 허용 가능한 감수 사항입니다.

### <a name="optimizing-externally-hosted-models"></a>외부에서 호스트된 모델 최적화

[Power BI 호스트 모델 최적화](#optimizing-power-bi-hosted-models) 섹션에서 설명된 많은 최적화 가능성은 Azure Analysis Services 및 SQL Server Analysis Services를 사용하여 개발하는 모델에도 적용됩니다. 복합 모델 및 집계 테이블을 포함하여 현재 지원되지 않는 특정 기능에는 적용되지 않습니다.

외부 호스팅 데이터 집합에 대한 추가 고려 사항은 Power BI 서비스와 관련된 데이터베이스 호스팅입니다. Azure Analysis Services의 경우 이는 Power BI 테넌트(홈 영역)와 동일한 지역에 Azure 리소스를 만드는 것을 의미합니다. SQL Server Analysis Services의 경우, IaaS의 경우 이는 동일한 지역에서 VM을 호스팅하는 것을 의미하며 온-프레미스에 대해서는 효율적인 게이트웨이 설정을 보장한다는 것을 의미합니다.

또한, Azure Analysis Services 데이터베이스 및 SQL Server Analysis Services 테이블 형식 데이터베이스는 해당 모델을 메모리에 완전히 로드하고 쿼리를 지원하기 위해 항상 메모리에 남아 있어야 한다는 점에 주목해야 할 수 있습니다. Power BI 서비스와 마찬가지로, 새로 고치는 동안 모델이 온라인을 유지해야 하는 경우 새로 고침에 대한 충분한 메모리가 필요합니다. Power BI 서비스와 달리, 모델이 사용량에 따라 메모리를 자동으로 드나드는 개념은 없습니다. 따라서 power BI 프리미엄은 낮은 메모리 사용량으로 모델 쿼리를 최대화하기 위해 보다 효율적인 방법을 제공합니다.

## <a name="capacity-planning"></a>용량 계획

프리미엄 용량 크기는 사용 가능한 메모리와 프로세서 리소스 그리고 용량에 부과되는 제한을 결정합니다. 여러 개의 프리미엄 용량을 만들면 용량 워크로드를 서로 격리시키는데 도움이 되므로 프리미엄 용량 수도 고려 사항입니다. 저장소는 용량 노드당 100TB이며 이는 모든 워크로드에 충분할 가능성이 크다는 점에 유의합니다.

프리미엄 용량의 수와 크기를 결정 어려울 수 있습니다, 특히 만든 초기 용량에 대 한 합니다. 용량 크기 조정 예상된 일상 사용량을 나타내는 평균 워크 로드를 이해 하는 경우 첫 번째 단계입니다. 일부 워크 로드는 같은 이해 하는 것이 반드시 합니다. 예를 들어--스펙트럼의 한쪽 끝의 단일 시각적 개체를 포함 하는 단일 보고서 페이지에 액세스 하는 동시 사용자 100 명은 쉽게 달성할 수 있습니다. 아직-스펙트럼의 한쪽 끝에 100 개의 다른 보고서에 액세스 하는 동시 사용자 100 명 보고서 페이지의 시각적 개체에 100 개의 것 용량 리소스의 매우 다양 한 요구를 작성 하려면입니다.

용량 관리자 환경, 콘텐츠 및 예상 되는 용도를 특정 많은 요소를 고려 하므로 할 수 있습니다. 재정의 목적은 일관성 있는 쿼리 시간, 허용 가능한 대기 시간 및 제거 비율을 제공 하는 동안 용량 사용률을 극대화 하는 것입니다. 고려 사항에 대 한 요소를 포함할 수 있습니다.

- **크기와 데이터 모델** -가져오기 모델 새로 고침 또는 쿼리를 허용 하는 메모리에 완전히 로드 해야 합니다. LC/DQ 데이터 집합에는 상당한 프로세서 시간 및 복잡 한 측정값 또는 RLS 규칙을 평가할 수 있는 상당한 메모리가 필요할 수 있습니다. 메모리 및 프로세서 크기와 LC/DQ 쿼리 처리량 용량 크기에 따라 제한 됩니다.
- **동시 활성 모델** -가져오기 모델의 동시 쿼리는 가장 응답성 및 성능을 경우 배달 메모리에 남아 있습니다. 해당 새로 고침 수 있도록 추가 메모리를 사용 하 여 자주 쿼리 하는 모든 모델을 호스트 하는 데 충분 한 메모리가 있어야 합니다.
- **가져오기 모델 새로 고침** -새로 고침 유형 (전체 또는 증분), 기간 및 Power Query 쿼리, 계산 된 테이블/열 논리의 복잡성 메모리에 특히 프로세서 사용량에 영향을 줄 수 있습니다. 용량 크기 (1.5 x backend v 코어, 반올림)에 따라 동시 새로 고침 제한 됩니다.
- **동시 쿼리** -여러 쿼리가 동시에 발생할 수 있습니다에 응답 하지 않을 때 보고 프로세서나 LC/DQ 연결 용량 한도 초과 합니다. 이 여러 시각적 개체를 포함 하는 보고서 페이지에 대 한 경우는 더욱 그렇습니다.
- **데이터 흐름 페이지를 매긴 보고서 및** -데이터 흐름 및 용량 메모리의 구성 가능한 최대 비율을 요구 하 여 페이지 매긴된 보고서를 지원 하도록 용량을 구성할 수 있습니다. 메모리를 동적으로 데이터 흐름, 할당 하지만 페이지 매긴된 보고서에 정적으로 할당 됩니다.

이러한 요소 외에도 용량 관리자 여러 가지 역할을 만드는 것이 좋습니다 수 있습니다. 여러 용량 워크 로드의 격리에 대 한 허용 및 우선 순위 워크 로드 리소스 보장 되도록 구성할 수 있습니다. 예를 들어 셀프 서비스 BI (SSBI) 워크 로드에서 비즈니스에 중요 한 워크 로드를 구분 하려면 두 용량을 만들 수 있습니다. 비즈니스에 중요 한 용량 보장 된 리소스에 작성만 IT 부서에 부여 된 액세스를 제공 하는 큰 회사 모델 격리를 사용할 수 있습니다. 비즈니스 분석가 게 부여 된 액세스를 사용 하 여 점점 더 많은 작은 모델을 호스트 하는 SSBI 용량을 사용할 수 있습니다. SSBI 용량 때때로 발생할 수 있습니다 허용 가능할 수 있는 쿼리 또는 새로 고침 대기 합니다.

시간이 지남에 따라 용량 관리자 수 작업 영역에서 분산 용량 용량을 확장 또는 축소 하 고 작업 영역 또는 용량 간에 작업 영역 간에 콘텐츠를 이동 하 여 합니다. 일반적으로 호스트 더 큰 모델 기능을 강화 하 고 더 높은 동시성 규모 확장할 수 있습니다.

라이선스를 구입 v 코어를 사용 하 여 테 넌 트를 제공 한다는 사실을 기억 하십시오. 구매를 **P3** 구독을 만들거나 최대 4 개의 프리미엄 용량을 사용할 수 P3 또는 P2, x 2 또는 4 x 1 즉 x P1 합니다. 또한 P2 용량 P3 용량을 업사이징 전에 수에 고려해 야 할 v 코어 분할 두 P1 용량을 만들려면.

## <a name="testing-approaches"></a>테스트 방법

용량 크기를 결정 되 면 테스트 수 수행한 통제 된 환경 만들기. 실용적이 고 경제적인 옵션을 만들 때 P1 용량 P2 사용 하 여 A4 용량을 같은 크기 임을 유의 해야 하는 (A Sku) Azure 용량 및 P3 용량 동일한 크기 A5 및 A6 용량으로 각각. Azure 용량 신속 하 게 만들 수 있으며 시간 단위로 요금이 청구 됩니다. 따라서 테스트 완료 되 면 삭제할 수 있습니다 쉽게 비용 발생을 중지 합니다.

테스트 콘텐츠 Azure 용량에 만든 작업 영역에 추가할 수 있습니다 및 다음 단일 사용자로 보고서를 실행 쿼리의 현실적이 고 대표적인 워크 로드를 생성 합니다. 가져오기 모델의 경우 각 모델에 대 한 새로 고침도 수행 되어야 합니다. 리소스 사용률을 이해 하는 모든 메트릭을 검토 하려면 모니터링 도구 사용 다음 수 있습니다.

테스트 반복 되는 것입니다. 테스트를 여러 번 실행 해야 하 고 때마다 약 동일한 결과 제공 해야 합니다. 이러한 결과의 평균 추정 및 true 프로덕션 환경에서 워크 로드 예측에 사용할 수 있습니다.

스트레스 테스트를 생성 하려면 부하 테스트는 이러한 방법이 실제 작업을 시뮬레이션 하기 위해 응용 프로그램을 개발 하는 것이 좋습니다. 이 작업을 수행 하는 방법의 세부 내용은이 문서의 범위를 벗어나는 합니다. 자세한 내용은 코드 샘플을 포함 한 참조를 [Visual Studio 부하 테스트를 사용 하 여 Power BI에 대 한 응용 프로그램을 테스트 로드](https://blogs.msdn.microsoft.com/charles_sterling/2018/04/04/webinar-load-testing-power-bi-applications-with-visual-studio-load-test/) 웹 세미나입니다.

## <a name="acknowledgements"></a>승인

이 문서는 [Bitwise Solutions](https://www.bitwisesolutions.com.au/)의 독립 BI 전문가이며 Data Platform MVP인 Peter Myers가 작성했습니다.

## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [프리미엄 용량 시나리오](service-premium-capacity-scenarios.md)   
  
궁금한 점이 더 있나요? [Power BI 커뮤니티에 질문합니다.](https://community.powerbi.com/)

||||||